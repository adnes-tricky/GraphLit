(function(I,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(I=typeof globalThis!="undefined"?globalThis:I||self,o(I["v-network-graph"]={},I.Vue))})(this,function(I,o){"use strict";var qd=Object.defineProperty,Xd=Object.defineProperties;var Kd=Object.getOwnPropertyDescriptors;var gr=Object.getOwnPropertySymbols;var Yd=Object.prototype.hasOwnProperty,Qd=Object.prototype.propertyIsEnumerable;var ee=Math.pow,mr=(I,o,q)=>o in I?qd(I,o,{enumerable:!0,configurable:!0,writable:!0,value:q}):I[o]=q,Q=(I,o)=>{for(var q in o||(o={}))Yd.call(o,q)&&mr(I,q,o[q]);if(gr)for(var q of gr(o))Qd.call(o,q)&&mr(I,q,o[q]);return I},tt=(I,o)=>Xd(I,Kd(o));var _e=(I,o,q)=>new Promise((ce,Z)=>{var nt=fe=>{try{xe(q.next(fe))}catch(he){Z(he)}},Ct=fe=>{try{xe(q.throw(fe))}catch(he){Z(he)}},xe=fe=>fe.done?ce(fe.value):Promise.resolve(fe.value).then(nt,Ct);xe((q=q.apply(I,o)).next())});const q=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function ce(e){return o.isReactive(e)?e:o.reactive(e)}function Z(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}const nt=Symbol("containers");function Ct(e){o.provide(nt,e)}function xe(){const e=Z(o.inject(nt),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}function fe(){this.__data__=[],this.size=0}function he(e,t){return e===t||e!==e&&t!==t}function ot(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}var br=Array.prototype,yr=br.splice;function vr(e){var t=this.__data__,n=ot(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():yr.call(t,n,1),--this.size,!0}function wr(e){var t=this.__data__,n=ot(t,e);return n<0?void 0:t[n][1]}function Er(e){return ot(this.__data__,e)>-1}function kr(e,t){var n=this.__data__,r=ot(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=fe,pe.prototype.delete=vr,pe.prototype.get=wr,pe.prototype.has=Er,pe.prototype.set=kr;function xr(){this.__data__=new pe,this.size=0}function Pr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Sr(e){return this.__data__.get(e)}function Cr(e){return this.__data__.has(e)}var Mr=typeof global=="object"&&global&&global.Object===Object&&global;const yn=Mr;var Tr=typeof self=="object"&&self&&self.Object===Object&&self,Or=yn||Tr||Function("return this")();const ie=Or;var Br=ie.Symbol;const me=Br;var vn=Object.prototype,$r=vn.hasOwnProperty,zr=vn.toString,Re=me?me.toStringTag:void 0;function _r(e){var t=$r.call(e,Re),n=e[Re];try{e[Re]=void 0;var r=!0}catch(s){}var i=zr.call(e);return r&&(t?e[Re]=n:delete e[Re]),i}var Ir=Object.prototype,Ar=Ir.toString;function Lr(e){return Ar.call(e)}var Nr="[object Null]",Dr="[object Undefined]",wn=me?me.toStringTag:void 0;function Pe(e){return e==null?e===void 0?Dr:Nr:wn&&wn in Object(e)?_r(e):Lr(e)}function ue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var jr="[object AsyncFunction]",Zr="[object Function]",Rr="[object GeneratorFunction]",Vr="[object Proxy]";function Mt(e){if(!ue(e))return!1;var t=Pe(e);return t==Zr||t==Rr||t==jr||t==Vr}var Hr=ie["__core-js_shared__"];const Tt=Hr;var En=function(){var e=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Wr(e){return!!En&&En in e}var Fr=Function.prototype,Ur=Fr.toString;function Se(e){if(e!=null){try{return Ur.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Gr=/[\\^$.*+?()[\]{}|]/g,qr=/^\[object .+?Constructor\]$/,Xr=Function.prototype,Kr=Object.prototype,Yr=Xr.toString,Qr=Kr.hasOwnProperty,Jr=RegExp("^"+Yr.call(Qr).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ei(e){if(!ue(e)||Wr(e))return!1;var t=Mt(e)?Jr:qr;return t.test(Se(e))}function ti(e,t){return e==null?void 0:e[t]}function Ce(e,t){var n=ti(e,t);return ei(n)?n:void 0}var ni=Ce(ie,"Map");const Ve=ni;var oi=Ce(Object,"create");const He=oi;function ri(){this.__data__=He?He(null):{},this.size=0}function ii(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var si="__lodash_hash_undefined__",ai=Object.prototype,li=ai.hasOwnProperty;function ci(e){var t=this.__data__;if(He){var n=t[e];return n===si?void 0:n}return li.call(t,e)?t[e]:void 0}var ui=Object.prototype,di=ui.hasOwnProperty;function fi(e){var t=this.__data__;return He?t[e]!==void 0:di.call(t,e)}var hi="__lodash_hash_undefined__";function pi(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=He&&t===void 0?hi:t,this}function Me(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Me.prototype.clear=ri,Me.prototype.delete=ii,Me.prototype.get=ci,Me.prototype.has=fi,Me.prototype.set=pi;function gi(){this.size=0,this.__data__={hash:new Me,map:new(Ve||pe),string:new Me}}function mi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function rt(e,t){var n=e.__data__;return mi(t)?n[typeof t=="string"?"string":"hash"]:n.map}function bi(e){var t=rt(this,e).delete(e);return this.size-=t?1:0,t}function yi(e){return rt(this,e).get(e)}function vi(e){return rt(this,e).has(e)}function wi(e,t){var n=rt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Te(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Te.prototype.clear=gi,Te.prototype.delete=bi,Te.prototype.get=yi,Te.prototype.has=vi,Te.prototype.set=wi;var Ei=200;function ki(e,t){var n=this.__data__;if(n instanceof pe){var r=n.__data__;if(!Ve||r.length<Ei-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Te(r)}return n.set(e,t),this.size=n.size,this}function ge(e){var t=this.__data__=new pe(e);this.size=t.size}ge.prototype.clear=xr,ge.prototype.delete=Pr,ge.prototype.get=Sr,ge.prototype.has=Cr,ge.prototype.set=ki;var xi=function(){try{var e=Ce(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const it=xi;function Ot(e,t,n){t=="__proto__"&&it?it(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Bt(e,t,n){(n!==void 0&&!he(e[t],n)||n===void 0&&!(t in e))&&Ot(e,t,n)}function Pi(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),l=a.length;l--;){var u=a[e?l:++i];if(n(s[u],u,s)===!1)break}return t}}var Si=Pi();const Ci=Si;var kn=typeof I=="object"&&I&&!I.nodeType&&I,xn=kn&&typeof module=="object"&&module&&!module.nodeType&&module,Mi=xn&&xn.exports===kn,Pn=Mi?ie.Buffer:void 0,Sn=Pn?Pn.allocUnsafe:void 0;function Ti(e,t){if(t)return e.slice();var n=e.length,r=Sn?Sn(n):new e.constructor(n);return e.copy(r),r}var Oi=ie.Uint8Array;const st=Oi;function Bi(e){var t=new e.constructor(e.byteLength);return new st(t).set(new st(e)),t}function $i(e,t){var n=t?Bi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function zi(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Cn=Object.create,_i=function(){function e(){}return function(t){if(!ue(t))return{};if(Cn)return Cn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Ii=_i;function Mn(e,t){return function(n){return e(t(n))}}var Ai=Mn(Object.getPrototypeOf,Object);const Tn=Ai;var Li=Object.prototype;function $t(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Li;return e===n}function Ni(e){return typeof e.constructor=="function"&&!$t(e)?Ii(Tn(e)):{}}function be(e){return e!=null&&typeof e=="object"}var Di="[object Arguments]";function On(e){return be(e)&&Pe(e)==Di}var Bn=Object.prototype,ji=Bn.hasOwnProperty,Zi=Bn.propertyIsEnumerable,Ri=On(function(){return arguments}())?On:function(e){return be(e)&&ji.call(e,"callee")&&!Zi.call(e,"callee")};const zt=Ri;var Vi=Array.isArray;const Oe=Vi;var Hi=9007199254740991;function $n(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hi}function at(e){return e!=null&&$n(e.length)&&!Mt(e)}function Wi(e){return be(e)&&at(e)}function Fi(){return!1}var zn=typeof I=="object"&&I&&!I.nodeType&&I,_n=zn&&typeof module=="object"&&module&&!module.nodeType&&module,Ui=_n&&_n.exports===zn,In=Ui?ie.Buffer:void 0,Gi=In?In.isBuffer:void 0,qi=Gi||Fi;const lt=qi;var Xi="[object Object]",Ki=Function.prototype,Yi=Object.prototype,An=Ki.toString,Qi=Yi.hasOwnProperty,Ji=An.call(Object);function Ln(e){if(!be(e)||Pe(e)!=Xi)return!1;var t=Tn(e);if(t===null)return!0;var n=Qi.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&An.call(n)==Ji}var es="[object Arguments]",ts="[object Array]",ns="[object Boolean]",os="[object Date]",rs="[object Error]",is="[object Function]",ss="[object Map]",as="[object Number]",ls="[object Object]",cs="[object RegExp]",us="[object Set]",ds="[object String]",fs="[object WeakMap]",hs="[object ArrayBuffer]",ps="[object DataView]",gs="[object Float32Array]",ms="[object Float64Array]",bs="[object Int8Array]",ys="[object Int16Array]",vs="[object Int32Array]",ws="[object Uint8Array]",Es="[object Uint8ClampedArray]",ks="[object Uint16Array]",xs="[object Uint32Array]",H={};H[gs]=H[ms]=H[bs]=H[ys]=H[vs]=H[ws]=H[Es]=H[ks]=H[xs]=!0,H[es]=H[ts]=H[hs]=H[ns]=H[ps]=H[os]=H[rs]=H[is]=H[ss]=H[as]=H[ls]=H[cs]=H[us]=H[ds]=H[fs]=!1;function Ps(e){return be(e)&&$n(e.length)&&!!H[Pe(e)]}function Ss(e){return function(t){return e(t)}}var Nn=typeof I=="object"&&I&&!I.nodeType&&I,We=Nn&&typeof module=="object"&&module&&!module.nodeType&&module,Cs=We&&We.exports===Nn,_t=Cs&&yn.process,Ms=function(){try{var e=We&&We.require&&We.require("util").types;return e||_t&&_t.binding&&_t.binding("util")}catch(t){}}();const Dn=Ms;var jn=Dn&&Dn.isTypedArray,Ts=jn?Ss(jn):Ps;const It=Ts;function At(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Os=Object.prototype,Bs=Os.hasOwnProperty;function $s(e,t,n){var r=e[t];(!(Bs.call(e,t)&&he(r,n))||n===void 0&&!(t in e))&&Ot(e,t,n)}function zs(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],u=r?r(n[l],e[l],l,n,e):void 0;u===void 0&&(u=e[l]),i?Ot(n,l,u):$s(n,l,u)}return n}function _s(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Is=9007199254740991,As=/^(?:0|[1-9]\d*)$/;function Zn(e,t){var n=typeof e;return t=t==null?Is:t,!!t&&(n=="number"||n!="symbol"&&As.test(e))&&e>-1&&e%1==0&&e<t}var Ls=Object.prototype,Ns=Ls.hasOwnProperty;function Rn(e,t){var n=Oe(e),r=!n&&zt(e),i=!n&&!r&&lt(e),s=!n&&!r&&!i&&It(e),a=n||r||i||s,l=a?_s(e.length,String):[],u=l.length;for(var d in e)(t||Ns.call(e,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Zn(d,u)))&&l.push(d);return l}function Ds(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var js=Object.prototype,Zs=js.hasOwnProperty;function Rs(e){if(!ue(e))return Ds(e);var t=$t(e),n=[];for(var r in e)r=="constructor"&&(t||!Zs.call(e,r))||n.push(r);return n}function Vn(e){return at(e)?Rn(e,!0):Rs(e)}function Vs(e){return zs(e,Vn(e))}function Hs(e,t,n,r,i,s,a){var l=At(e,n),u=At(t,n),d=a.get(u);if(d){Bt(e,n,d);return}var c=s?s(l,u,n+"",e,t,a):void 0,h=c===void 0;if(h){var f=Oe(u),g=!f&&lt(u),E=!f&&!g&&It(u);c=u,f||g||E?Oe(l)?c=l:Wi(l)?c=zi(l):g?(h=!1,c=Ti(u,!0)):E?(h=!1,c=$i(u,!0)):c=[]:Ln(u)||zt(u)?(c=l,zt(l)?c=Vs(l):(!ue(l)||Mt(l))&&(c=Ni(u))):h=!1}h&&(a.set(u,c),i(c,u,r,s,a),a.delete(u)),Bt(e,n,c)}function Lt(e,t,n,r,i){e!==t&&Ci(t,function(s,a){if(i||(i=new ge),ue(s))Hs(e,t,a,n,Lt,r,i);else{var l=r?r(At(e,a),s,a+"",e,t,i):void 0;l===void 0&&(l=s),Bt(e,a,l)}},Vn)}function Hn(e){return e}function Ws(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Wn=Math.max;function Fs(e,t,n){return t=Wn(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Wn(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),Ws(e,this,l)}}function Us(e){return function(){return e}}var Gs=it?function(e,t){return it(e,"toString",{configurable:!0,enumerable:!1,value:Us(t),writable:!0})}:Hn;const qs=Gs;var Xs=800,Ks=16,Ys=Date.now;function Qs(e){var t=0,n=0;return function(){var r=Ys(),i=Ks-(r-n);if(n=r,i>0){if(++t>=Xs)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Js=Qs(qs);const ea=Js;function ta(e,t){return ea(Fs(e,t,Hn),e+"")}function Fn(e,t,n){if(!ue(n))return!1;var r=typeof t;return(r=="number"?at(n)&&Zn(t,n.length):r=="string"&&t in n)?he(n[t],e):!1}function Un(e){return ta(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&Fn(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,s)}return t})}var na=Un(function(e,t,n){Lt(e,t,n)});const Gn=na;var oa=Un(function(e,t,n,r){Lt(e,t,n,r)});const ra=oa;var ia=/\s/;function sa(e){for(var t=e.length;t--&&ia.test(e.charAt(t)););return t}var aa=/^\s+/;function la(e){return e&&e.slice(0,sa(e)+1).replace(aa,"")}var ca="[object Symbol]";function qn(e){return typeof e=="symbol"||be(e)&&Pe(e)==ca}var Xn=0/0,ua=/^[-+]0x[0-9a-f]+$/i,da=/^0b[01]+$/i,fa=/^0o[0-7]+$/i,ha=parseInt;function ct(e){if(typeof e=="number")return e;if(qn(e))return Xn;if(ue(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ue(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=la(e);var n=da.test(e);return n||fa.test(e)?ha(e.slice(2),n?2:8):ua.test(e)?Xn:+e}var Kn=1/0,pa=17976931348623157e292;function ga(e){if(!e)return e===0?e:0;if(e=ct(e),e===Kn||e===-Kn){var t=e<0?-1:1;return t*pa}return e===e?e:0}function Yn(e){var t=ga(e),n=t%1;return t===t?n?t-n:t:0}function ma(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var ba=1/0,Qn=me?me.prototype:void 0,Jn=Qn?Qn.toString:void 0;function eo(e){if(typeof e=="string")return e;if(Oe(e))return ma(e,eo)+"";if(qn(e))return Jn?Jn.call(e):"";var t=e+"";return t=="0"&&1/e==-ba?"-0":t}function to(e){return e==null?"":eo(e)}var ya=ie.isFinite,va=Math.min;function wa(e){var t=Math[e];return function(n,r){if(n=ct(n),r=r==null?0:va(Yn(r),292),r&&ya(n)){var i=(to(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(to(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var Ea=wa("round");const no=Ea;class B{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(r=>r instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([r,i])=>[r,i instanceof Function?i(n):i]))}}var z=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))(z||{});function ut(e){const t={};return Object.assign(t,e(t))}function ka(e){return e}function xa(e){return e}function oo(e,t,n){const r=B.values(t.normal,e);return r.type=="circle"?{width:r.radius*2*n,height:r.radius*2*n}:{width:r.width*n,height:r.height*n}}function Pa(e,t,n,r){const s=Math.abs(e.x-n.x)<t.width/2+r.width/2,l=Math.abs(e.y-n.y)<t.height/2+r.height/2;return s&&l}function Fe(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(r=>parseInt(r)*t).filter(r=>!isNaN(r)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function dt(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(r=>parseInt(r)).filter(r=>!isNaN(r));n.length%2===0?t=n.reduce((r,i)=>r+i,0):t=n.reduce((r,i)=>r+i,0)*2}else t=e*2;return t}const ro=20;class Nt{activate(t){const{nodePositions:n,nodes:r,configs:i,emitter:s,scale:a,svgPanZoom:l}=t,u=h=>{for(const[f,g]of Object.entries(h)){const E=this.getOrCreateNodePosition(n,f);this.setNodePosition(E,g)}},d=h=>{const f=h.filter(x=>!(x in n.value)),g=l.getViewArea(),E=a.value;for(const x of f){const k=r.value[x],m=oo(k,i.node,E),y=Q({},g.center);for(;;){let v=!1;for(const[p,b]of Object.entries(n.value)){if(x===p)continue;const S=r.value[p];if(!S)continue;const C=oo(S,i.node,E);if(v=Pa(y,m,b,C),v)break}if(v)y.x+=m.width+ro*E,y.x+m.width/2>g.box.right&&(y.x=g.center.x,y.y+=m.height+ro*E);else break}const w=this.getOrCreateNodePosition(n,x);this.setNodePosition(w,y)}};d(Object.keys(r.value));const c=o.watch(()=>Object.keys(r.value),d);s.on("node:dragstart",u),s.on("node:pointermove",u),s.on("node:dragend",u),this.onDeactivate=()=>{c(),s.off("node:dragstart",u),s.off("node:pointermove",u),s.off("node:dragend",u)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=no(n.x,3),t.value.y=no(n.y,3)}getOrCreateNodePosition(t,n){const r=o.toRef(t.value,n);return r.value||(r.value={x:0,y:0}),r}}function io(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",autoPanOnResize:!0,layoutHandler:new Nt,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:e=>{const t=/Mac OS/.test(navigator.userAgent)?e.metaKey:e.ctrlKey;return e.type==="keydown"?t:!t}},builtInLayerOrder:[]},node:ut(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>B.value(e.normal.type,t),radius:t=>{var n;return((n=B.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=B.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=B.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=B.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>B.value(e.normal.strokeWidth,t),strokeColor:t=>B.value(e.normal.strokeColor,t),strokeDasharray:t=>B.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:z.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:ut(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>B.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>B.value(e.normal.dasharray,t),linecap:t=>B.value(e.normal.linecap,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selected:{width:t=>B.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=B.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>B.value(e.normal.linecap,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:ut(e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:o.reactive({width:6,color:t=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],r=t.edges.map(i=>i.split("").reduce((s,a)=>(s=(s<<5)-s+a.charCodeAt(0),s&s),0)).reduce((i,s)=>i+s,0);return n[Math.abs(r)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>B.value(e.path.width,t),color:t=>B.value(e.path.color,t),dasharray:t=>B.value(e.path.dasharray,t),linecap:t=>B.value(e.path.linecap,t),linejoin:t=>B.value(e.path.linejoin,t),animate:t=>B.value(e.path.animate,t),animationSpeed:t=>B.value(e.path.animationSpeed,t)},hover:{width:t=>B.value(e.normal.width,t)+2,color:t=>B.value(e.normal.color,t),dasharray:t=>B.value(e.normal.dasharray,t),linecap:t=>B.value(e.normal.linecap,t),linejoin:t=>B.value(e.normal.linejoin,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selected:{width:t=>B.value(e.normal.width,t)+2,color:t=>B.value(e.normal.color,t),dasharray:"6 12",linecap:t=>B.value(e.normal.linecap,t),linejoin:t=>B.value(e.normal.linejoin,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}function Sa(e){const t=io();return e&&Gn(t,e),t}const so=Symbol("style");function Ca(e,t){return Ln(e)?Gn(e,t):t}function Ma(e){const t=o.reactive(io()),n=Object.keys(t);for(const r of n)o.watch(()=>e.value[r],()=>{ra(t[r],e.value[r]||{},Ca)},{immediate:!0,deep:!0});return o.provide(so,t),t}function ft(e){return Z(o.inject(so),`Configs(${e})`)[e]}function Ta(){return ft("view")}function ht(){return ft("node")}function Ue(){return ft("edge")}function ao(){return ft("path")}let Oa=1;function Ba(){return Oa++}var $a="__lodash_hash_undefined__";function za(e){return this.__data__.set(e,$a),this}function _a(e){return this.__data__.has(e)}function Ge(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Te;++t<n;)this.add(e[t])}Ge.prototype.add=Ge.prototype.push=za,Ge.prototype.has=_a;function Ia(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function lo(e,t){return e.has(t)}var Aa=1,La=2;function co(e,t,n,r,i,s){var a=n&Aa,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var d=s.get(e),c=s.get(t);if(d&&c)return d==t&&c==e;var h=-1,f=!0,g=n&La?new Ge:void 0;for(s.set(e,t),s.set(t,e);++h<l;){var E=e[h],x=t[h];if(r)var k=a?r(x,E,h,t,e,s):r(E,x,h,e,t,s);if(k!==void 0){if(k)continue;f=!1;break}if(g){if(!Ia(t,function(m,y){if(!lo(g,y)&&(E===m||i(E,m,n,r,s)))return g.push(y)})){f=!1;break}}else if(!(E===x||i(E,x,n,r,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function Na(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Dt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Da=1,ja=2,Za="[object Boolean]",Ra="[object Date]",Va="[object Error]",Ha="[object Map]",Wa="[object Number]",Fa="[object RegExp]",Ua="[object Set]",Ga="[object String]",qa="[object Symbol]",Xa="[object ArrayBuffer]",Ka="[object DataView]",uo=me?me.prototype:void 0,jt=uo?uo.valueOf:void 0;function Ya(e,t,n,r,i,s,a){switch(n){case Ka:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xa:return!(e.byteLength!=t.byteLength||!s(new st(e),new st(t)));case Za:case Ra:case Wa:return he(+e,+t);case Va:return e.name==t.name&&e.message==t.message;case Fa:case Ga:return e==t+"";case Ha:var l=Na;case Ua:var u=r&Da;if(l||(l=Dt),e.size!=t.size&&!u)return!1;var d=a.get(e);if(d)return d==t;r|=ja,a.set(e,t);var c=co(l(e),l(t),r,i,s,a);return a.delete(e),c;case qa:if(jt)return jt.call(e)==jt.call(t)}return!1}function Qa(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ja(e,t,n){var r=t(e);return Oe(e)?r:Qa(r,n(e))}function el(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function tl(){return[]}var nl=Object.prototype,ol=nl.propertyIsEnumerable,fo=Object.getOwnPropertySymbols,rl=fo?function(e){return e==null?[]:(e=Object(e),el(fo(e),function(t){return ol.call(e,t)}))}:tl;const il=rl;var sl=Mn(Object.keys,Object);const al=sl;var ll=Object.prototype,cl=ll.hasOwnProperty;function ul(e){if(!$t(e))return al(e);var t=[];for(var n in Object(e))cl.call(e,n)&&n!="constructor"&&t.push(n);return t}function dl(e){return at(e)?Rn(e):ul(e)}function ho(e){return Ja(e,dl,il)}var fl=1,hl=Object.prototype,pl=hl.hasOwnProperty;function gl(e,t,n,r,i,s){var a=n&fl,l=ho(e),u=l.length,d=ho(t),c=d.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var f=l[h];if(!(a?f in t:pl.call(t,f)))return!1}var g=s.get(e),E=s.get(t);if(g&&E)return g==t&&E==e;var x=!0;s.set(e,t),s.set(t,e);for(var k=a;++h<u;){f=l[h];var m=e[f],y=t[f];if(r)var w=a?r(y,m,f,t,e,s):r(m,y,f,e,t,s);if(!(w===void 0?m===y||i(m,y,n,r,s):w)){x=!1;break}k||(k=f=="constructor")}if(x&&!k){var v=e.constructor,p=t.constructor;v!=p&&"constructor"in e&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof p=="function"&&p instanceof p)&&(x=!1)}return s.delete(e),s.delete(t),x}var ml=Ce(ie,"DataView");const Zt=ml;var bl=Ce(ie,"Promise");const Rt=bl;var yl=Ce(ie,"Set");const Ie=yl;var vl=Ce(ie,"WeakMap");const Vt=vl;var po="[object Map]",wl="[object Object]",go="[object Promise]",mo="[object Set]",bo="[object WeakMap]",yo="[object DataView]",El=Se(Zt),kl=Se(Ve),xl=Se(Rt),Pl=Se(Ie),Sl=Se(Vt),Be=Pe;(Zt&&Be(new Zt(new ArrayBuffer(1)))!=yo||Ve&&Be(new Ve)!=po||Rt&&Be(Rt.resolve())!=go||Ie&&Be(new Ie)!=mo||Vt&&Be(new Vt)!=bo)&&(Be=function(e){var t=Pe(e),n=t==wl?e.constructor:void 0,r=n?Se(n):"";if(r)switch(r){case El:return yo;case kl:return po;case xl:return go;case Pl:return mo;case Sl:return bo}return t});const vo=Be;var Cl=1,wo="[object Arguments]",Eo="[object Array]",pt="[object Object]",Ml=Object.prototype,ko=Ml.hasOwnProperty;function Tl(e,t,n,r,i,s){var a=Oe(e),l=Oe(t),u=a?Eo:vo(e),d=l?Eo:vo(t);u=u==wo?pt:u,d=d==wo?pt:d;var c=u==pt,h=d==pt,f=u==d;if(f&&lt(e)){if(!lt(t))return!1;a=!0,c=!1}if(f&&!c)return s||(s=new ge),a||It(e)?co(e,t,n,r,i,s):Ya(e,t,u,n,r,i,s);if(!(n&Cl)){var g=c&&ko.call(e,"__wrapped__"),E=h&&ko.call(t,"__wrapped__");if(g||E){var x=g?e.value():e,k=E?t.value():t;return s||(s=new ge),i(x,k,n,r,s)}}return f?(s||(s=new ge),gl(e,t,n,r,i,s)):!1}function xo(e,t,n,r,i){return e===t?!0:e==null||t==null||!be(e)&&!be(t)?e!==e&&t!==t:Tl(e,t,n,r,xo,i)}function $e(e,t){return xo(e,t)}function te(e){return Object.entries(e)}function gt(e,t){const n=new Set(Object.keys(e));te(t).forEach(([r,i])=>{$e(e[r],i)||(e[r]=i),n.delete(r)}),n.forEach(r=>delete e[r])}function Ol(e,t,n){const r=ce({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return o.watchEffect(()=>{const{edgeLayoutPoints:i,edgeGroups:s}=$l(n,e.value,t.value);gt(r.edgeLayoutPoints,i),gt(r.edgeGroups,s)}),o.watchEffect(()=>{const i={};for(const[s,{edges:a,groupWidth:l}]of Object.entries(r.edgeGroups)){let u=!1;if(l==0)u=!1;else if(n.edge.summarize instanceof Function){const d=n.edge.summarize(a,n);d===null?u=Po(e.value,a,n,l):u=d}else n.edge.summarize?u=Po(e.value,a,n,l):u=!1;r.edgeGroups[s].summarize=u,u&&Object.keys(a).forEach(d=>i[d]=!0)}gt(r.summarizedEdges,i)}),r}function Bl(e,t,n,r,i,s){return e?t?So(e.edge,n,r,i,0,0,s):So(e.edge,n,r,i,e.groupWidth,e.pointInGroup,s):{p1:{x:0,y:0},p2:{x:0,y:0}}}function $l(e,t,n){const r={},i={},s={};for(const[l,u]of Object.entries(n)){if(!(u.source in t&&u.target in t))continue;const d=[u.source,u.target].sort().join("<=>"),c=s[d]||{};c[l]=u,s[d]=c}const a=e.edge.gap instanceof Function?e.edge.gap:(l,u)=>e.edge.gap;for(const[l,u]of Object.entries(s)){const d=Object.keys(u).length;if(d==0)continue;const c=a(u,e),[h,f]=Object.entries(u)[0];if(d===1)r[h]={edge:f,pointInGroup:0,groupWidth:0},i[l]={edges:u,groupWidth:0,summarize:!1};else{let g=0;const E=Object.entries(u).map(([m,y])=>{let w=B.value(e.edge.normal.width,y);return isNaN(+w)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",m,w),w=1),w/2}),x=Object.entries(u).map(([m,y],w)=>(w>0&&(g+=E[w-1]+c+E[w]),[m,y,g])),k=g;x.forEach(([m,y,w])=>{r[m]={edge:y,pointInGroup:w,groupWidth:k}}),i[l]={edges:u,groupWidth:k,summarize:!1}}}return{edgeLayoutPoints:r,edgeGroups:i}}function Po(e,t,n,r){if(Object.entries(t).length===1)return!1;const s=Math.min(...Object.values(t).flatMap(a=>[e[a.source],e[a.target]]).filter(a=>a).map(a=>{const l=B.values(n.node.normal,a);return l.type==="circle"?l.radius*2:Math.min(l.width,l.height)}));return r>s}function So(e,t,n,r,i,s,a){var h,f,g,E,x,k,m,y;let l,u,d,c;return e.source<e.target?[l,u,d,c]=Co((h=t==null?void 0:t.x)!=null?h:0,(f=t==null?void 0:t.y)!=null?f:0,(g=n==null?void 0:n.x)!=null?g:0,(E=n==null?void 0:n.y)!=null?E:0,r,i,s,a):[d,c,l,u]=Co((x=n==null?void 0:n.x)!=null?x:0,(k=n==null?void 0:n.y)!=null?k:0,(m=t==null?void 0:t.x)!=null?m:0,(y=t==null?void 0:t.y)!=null?y:0,r,i,s,a),{p1:{x:l,y:u},p2:{x:d,y:c}}}function Co(e,t,n,r,i,s,a,l){const u=n-e,d=r-t;let c=(s/2-a)*i;if(c!==0&&l!=="clock"){const h=Math.atan2(r-t,n-e);if(l==="vertical"){const f=Math.PI/2;(h<-f||h>=f)&&(c*=-1)}else l==="horizontal"&&h<0&&(c*=-1)}if(u===0){const h=d<0?-1:1;return[e+c*h,t,n+c*h,r]}else if(d===0){const h=u<0?1:-1;return[e,t+c*h,n,r+c*h]}else{const f=-1/(d/u);d<0&&(c=-c);const g=c/Math.sqrt(1+Math.pow(f,2));return[e+g,t+g*f,n+g,r+g*f]}}function Mo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function Ht(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function To(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function Oo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function Wt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function Bo(e,t){return e.x*t.x+e.y*t.y}function $o(e,t){return e.x*t.y-e.y*t.x}function Ft(e){return e.x*e.x+e.y*e.y}function Ut(e){return Math.sqrt(Ft(e))}function Gt(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function zo(e,t){return Math.sqrt(Gt(e,t))}function _o(e,t){t||(t={x:0,y:0});const n=Ut(e);return n===0?(t.x=1,t.y=0):Wt(e,{x:n,y:n},t),t}function mt(e,t,n){n||(n={x:0,y:0});const r=e.x*Math.cos(t)-e.y*Math.sin(t),i=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=r,n.y=i,n}const zl=180/Math.PI;function _l(e){return e*zl}function qt(e){return Math.atan2(e.y,e.x)}function Xt(e){return _l(qt(e))}const Il=Object.freeze(Object.defineProperty({__proto__:null,add:Mo,angle:qt,angleDegree:Xt,cross:$o,distance:zo,distanceSquared:Gt,divide:Wt,dot:Bo,length:Ut,lengthSquared:Ft,multiply:To,multiplyScalar:Oo,normalize:_o,rotate:mt,subtract:Ht},Symbol.toStringTag,{value:"Module"}));class N{static fromArray(t){return new N(t[0]||0,t[1]||0)}static fromObject(t){return new N(t.x,t.y)}constructor(t,n){this.x=t,this.y=n}add(t){return Mo(this,t,this)}subtract(t){return Ht(this,t,this)}multiply(t){return To(this,t,this)}multiplyScalar(t){return Oo(this,t,this)}divide(t){return Wt(this,t,this)}dot(t){return Bo(this,t)}cross(t){return $o(this,t)}lengthSquared(){return Ft(this)}length(){return Ut(this)}distanceSquared(t){return Gt(this,t)}distance(t){return zo(this,t)}normalize(){return _o(this,this)}angle(){return qt(this)}angleDegree(){return Xt(this)}rotate(t){return mt(this,t,this)}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new N(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const U=Q({Vector2D:N},Il);class W{constructor(t,n,r){this.source=t,this.target=n,this.v=r}static fromLinePosition(t){const n=N.fromObject(t.p1),r=N.fromObject(t.p2);return new W(n,r,Ae(n,r))}static fromPositions(t,n){const r=N.fromObject(t),i=N.fromObject(n);return new W(r,i,Ae(r,i))}static fromVectors(t,n){return new W(t,n,Ae(t,n))}}function Ae(e,t){return t.clone().subtract(e)}function Al(e){return[N.fromObject(e.p1),N.fromObject(e.p2)]}function Ll(e){return new N((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}function bt(e,t){return{p1:e,p2:t}}function Kt(e,t,n){const r=W.fromLinePosition(e);return Nl(r,t,n)}function Nl(e,t,n){const r=e.v.clone().normalize(),i=e.source.clone().add(r.clone().multiplyScalar(t)),s=e.target.clone().subtract(r.clone().multiplyScalar(n));let a=i.toObject(),l=s.toObject();const u=Ae(i,s);if(e.v.angle()*u.angle()<0){const d=new N((a.x+l.x)/2,(a.y+l.y)/2),c=d.clone().add(r.multiplyScalar(.5));a=d.toObject(),l=c.toObject()}return{p1:a,p2:l}}function Dl(e){return{p1:e.p2,p2:e.p1}}function qe(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return W.fromVectors(e.target,e.target.clone().add(t))}function Yt(e,t){const n=t.v.clone().normalize(),r=t.source,i=U.subtract(e,r),s=n.dot(i);return r.clone().add(n.multiplyScalar(s))}function yt(e,t,n,r){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const a=W.fromVectors(e,t),l=Yt(n,a),u=U.length(U.subtract(l,n));if(r<u)return null;if(r===u)return l;const d=Math.sqrt(ee(r,2)-ee(u,2)),c=a.v.normalize().multiplyScalar(d);return l.subtract(c)}function jl(e,t,n,r,i){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const l=W.fromVectors(e,t),u=Yt(n,l),d=U.length(U.subtract(u,n));if(r<d)return null;if(r===d)return u;const c=Math.sqrt(ee(r,2)-ee(d,2)),h=l.v.normalize().multiplyScalar(c),f=u.clone().add(h),g=u.clone().subtract(h),E=i.distance(f),x=i.distance(g);return Math.abs(E-x)<2?g:E<x?f:g}function ze(e,t){const n=U.subtract(t.source,e.source),r=e.v,i=t.v,s=U.cross(n,r)/U.cross(r,i);return t.source.clone().add(i.clone().multiplyScalar(s))}function Xe(e,t,n,r,i){const s=e,l=n.clone().subtract(s),u=l.length(),d=t+r;if(d<u)return null;const c=Math.abs(t-r);if(u<c)return null;if(u===d){const b=l.clone().normalize(),S=e.clone().add(b.multiplyScalar(t));return i?S:[S,S]}if(u===c){const b=l.clone().normalize(),S=t>r,C=e.clone().add(b.multiplyScalar(S?t:-t));return i?C:[C,C]}const h=t,f=r,g=(ee(u,2)+ee(h,2)-ee(f,2))/(2*u*h),E=h*g,x=Math.sqrt(ee(h,2)-ee(E,2)),k=l.clone().normalize(),m=new N(-k.y,k.x),y=k.clone().multiplyScalar(E),w=m.clone().multiplyScalar(x),v=e.clone().add(y).add(w),p=e.clone().add(y).subtract(w);if(i){const b=v.distance(i),S=p.distance(i);return b<S?v:p}else return[v,p]}function Io(e,t,n,r){const i=W.fromPositions(e,t),s=(n.width+n.strokeWidth)/2*r,a=(n.height+n.strokeWidth)/2*r,l=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*r:0,u=(i.v.angle()-Math.PI/2)%Math.PI,d=Math.PI/2-u%Math.PI,c=a*Math.abs(Math.tan(u)),h=s*Math.abs(Math.tan(d)),f=c<=s-l,g=h<=a-l;if(f||g||l===0)return Math.sqrt(f?ee(a,2)+ee(c,2):ee(s,2)+ee(h,2));{const E=t.x-s+l,x=t.y-a+l,k=t.x+s-l,m=t.y+a-l,y=[new N(E,x),new N(k,x),new N(k,m),new N(E,m)],w=Math.floor((i.v.angleDegree()+360)%360/90),v=y[w],p=yt(i.source,Yt(v,i),v,l);return p?Ae(p,i.target).length():Ae(v,i.target).length()+l}}function Ao(e,t,n,r,i){const s=W.fromLinePosition(e),a=s.v.clone().normalize(),l=r===0?s.source:s.source.clone().add(a.clone().multiplyScalar(r*i)),u=r===0?s.target:s.target.clone().subtract(a.clone().multiplyScalar(r*i)),d=(t.width/2+n)*i,c=new N(-a.y,a.x).multiplyScalar(d);let h=U.subtract(l,c),f=U.add(l,c),g=U.subtract(u,c),E=U.add(u,c);const x=s.v.angleDegree();return(x<-90||x>=90)&&([h,f]=[f,h],[g,E]=[E,g]),{source:{above:h,below:f},target:{above:g,below:E}}}function Zl(e,t,n,r){let i;n.type==="circle"?i=n.radius+n.strokeWidth/2:i=Io(t,e,n,1);let s;return r.type==="circle"?s=r.radius+r.strokeWidth/2:s=Io(e,t,r,1),[i,s]}function ye(e,t,n){const{x:r,y:i}=e,s=r-t.x,a=i-t.y;return{x:s*Math.cos(n)-a*Math.sin(n)+t.x,y:s*Math.sin(n)+a*Math.cos(n)+t.y}}function Qt(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function Jt(e,t,n,r){const i=[],s=W.fromVectors(t,e),a=W.fromVectors(t,n);let l=Le(s,a);r*l<0&&(l=Qt(l));const u=N.fromObject(ye(e,t,-l/2)),d=W.fromVectors(t,u),c=qe(d),h=Le(s,d);let f=qe(s);if(Math.abs(h)<Math.PI/2){const E=ze(f,c);i.push(E)}else{const E=N.fromObject(ye(u,t,h/2)),x=qe(W.fromVectors(t,N.fromObject(E))),k=ze(f,x),m=ze(x,c);i.push(k,E,m)}i.push(u);const g=Le(a,d);if(f=qe(a),Math.abs(g)<Math.PI/2){const E=ze(f,c);i.push(E)}else{const E=N.fromObject(ye(u,t,g/2)),x=qe(W.fromVectors(t,N.fromObject(E))),k=ze(c,x),m=ze(x,f);i.push(k,E,m)}return i}function Le(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function Rl(e,t,n){const r=e.x,i=e.y,s=t.x,a=t.y,l=n.x,u=n.y,d=r-s,c=i-a,h=l-s,f=u-a,g=(f*(d*(r+s)+c*(i+a))-c*(h*(l+s)+f*(u+a)))/(2*d*f-2*c*h),E=(-h*(d*(r+s)+c*(i+a))+d*(h*(l+s)+f*(u+a)))/(2*d*f-2*c*h),x=Math.sqrt(Math.pow(r-g,2)+Math.pow(i-E,2));return[new N(g,E),x]}function Ne(e){return e.type=="circle"?e.radius:Math.min(e.width,e.height)/2}function en(e,t,n,r,i,s,a){const l=o.reactive({});o.watch(()=>new Set(Object.keys(e.value)),(d,c)=>{c||(c=new Set([]));for(const h of d)c.has(h)||Vl(e,l,h,!1,t,i);for(const h of c)d.has(h)||(n.delete(h),r.delete(h),s==null||s(h,l[h]),delete l[h])},{immediate:!0}),o.watch(()=>[...n],(d,c)=>{const h=c?d.filter(g=>!c.includes(g)):d,f=c?c.filter(g=>!d.includes(g)):[];h.forEach(g=>{const E=l[g];E&&!E.selected&&(E.selected=!0)}),f.forEach(g=>{const E=l[g];E&&E.selected&&(E.selected=!1)})},{immediate:!0}),o.watch(()=>[...r],(d,c)=>{const h=d.filter(g=>!c.includes(g)),f=c.filter(g=>!d.includes(g));h.forEach(g=>{const E=l[g];E&&!E.hovered&&(E.hovered=!0)}),f.forEach(g=>{const E=l[g];E&&E.hovered&&(E.hovered=!1)})});const u=o.computed(()=>{const d=a?a():Object.values(l);return t.zOrder.enabled?Hl(d,t.zOrder,r,n):d});return{states:l,zOrderedList:u}}function Vl(e,t,n,r,i,s){const a={id:n,selected:r,hovered:!1,selectable:o.computed(()=>e.value[n]?B.value(i.selectable,e.value[n]):o.unref(a.selectable)),zIndex:o.computed(()=>e.value[n]?B.value(i.zOrder.zIndex,e.value[n]):o.unref(a.zIndex))};t[n]=a,s(e,n,t[n])}function Hl(e,t,n,r){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);if(a!=l)return a?1:-1;const u=r.has(i.id),d=r.has(s.id);return u!=d?u?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnHover?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnSelected?e.sort((i,s)=>{const a=r.has(i.id),l=r.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):e.sort((i,s)=>i.zIndex-s.zIndex)}function Wl(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}function Fl(){return{markers:o.reactive({}),referenceCount:{}}}function Ul(e){const{markers:t,referenceCount:n}=e;function r(l,u){var c;const d=(c=n[l])!=null?c:0;n[l]=d+1,d||(t[l]=u)}function i(l){var d;const u=(d=n[l])!=null?d:0;u&&(u-1===0?(delete t[l],delete n[l]):n[l]=u-1)}function s(l){l&&i(l)}function a(l,u,d,c,h){if(l.type==="none"){s(d);return}if(l.type==="custom")return s(d),l.customId;const f=Gl(l,u,c),g=ql(f,h);return g===d||(s(d),r(g,f)),g}return{makeMarker:a,clearMarker:s}}function Gl(e,t,n){var r;return tt(Q({},e),{color:(r=e.color)!=null?r:n,isSource:t})}function ql(e,t){const n=Wl(e.color),r=e.isSource?"L":"R",i=e.units==="strokeWidth"?"rel":"abs";return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${n}_${r}_${i}`}function tn(e,t,n){return{objects:e,selected:t,hovered:n}}const Lo=Symbol("states"),Xl={type:"none",width:0,height:0,margin:0,units:"strokeWidth",color:null};function Kl(e,t,n,r,i,s,a){const l=o.reactive({}),u=ce({});o.watchEffect(()=>{const w=Object.fromEntries(Object.keys(e.objects.value).map(v=>[v,{}]));Object.entries(t.objects.value).forEach(([v,p])=>{w!=null&&w[p.source]||(w[p.source]={}),w!=null&&w[p.target]||(w[p.target]={}),w[p.source][v]=p.target,w[p.target][v]=p.source}),gt(u,w)});const{states:d,zOrderedList:c}=en(e.objects,r.node,e.selected,e.hovered,(w,v,p)=>{Jl(w,v,p,r.node,u,i)},(w,v)=>{const p=i.nodes;delete p[w]}),h=Ba(),f=Ol(e.objects,t.objects,r),g=o.ref([]),{states:E,zOrderedList:x}=en(t.objects,r.edge,t.selected,t.hovered,(w,v,p)=>{tc(w,v,p,r.edge,s,d,f,i,a,h)},(w,v)=>{var p;(p=v.stopWatchHandle)==null||p.call(v)},()=>g.value);o.watchEffect(()=>{g.value=nc(f.edgeGroups,E)}),o.watch(f.edgeGroups,w=>ic(l,f,r),{immediate:!0});const{states:k,zOrderedList:m}=en(n.objects,r.path,n.selected,n.hovered,(w,v,p)=>{const b=p;b.clickable=o.computed(()=>w.value[v]?B.value(r.path.clickable,w.value[v]):!1),b.hoverable=o.computed(()=>w.value[v]?B.value(r.path.hoverable,w.value[v]):!1),b.path=w.value[v],b.edges=o.computed(()=>w.value[v].edges.map(C=>({edgeId:C,edge:t.objects.value[C]})).filter(C=>C.edge))}),y={nodeStates:d,edgeStates:E,edgeGroupStates:f,summarizedEdgeStates:l,pathStates:k,layouts:i,nodeZOrderedList:c,edgeZOrderedList:x,pathZOrderedList:m};return o.provide(Lo,y),y}function Yl(e){return e.summarized}function le(){return Z(o.inject(Lo),"states")}function Ql(e,t,n,r){return n&&r.hover?B.values(r.hover,e):No(e,t,r)}function No(e,t,n){return t&&n.selected?B.values(n.selected,e):B.values(n.normal,e)}function Jl(e,t,n,r,i,s){n.shape=o.computed(()=>e.value[t]?Ql(e.value[t],n.selected,n.hovered,r):o.unref(n.shape)),n.staticShape=o.computed(()=>e.value[t]?No(e.value[t],n.selected,r):o.unref(n.staticShape)),n.label=o.computed(()=>e.value[t]?B.values(r.label,e.value[t]):o.unref(n.label)),n.labelText=o.computed(()=>{var a,l;return r.label.text instanceof Function?o.unref(n.label).text:e.value[t]?(l=(a=e.value[t])==null?void 0:a[o.unref(n.label).text])!=null?l:"":o.unref(n.labelText)}),n.draggable=o.computed(()=>e.value[t]?B.value(r.draggable,e.value[t]):o.unref(n.draggable)),n.oppositeNodeIds=o.toRef(i,t),n.oppositeNodes=o.computed(()=>Object.entries(n.oppositeNodeIds).reduce((a,l)=>{const[u,d]=l,c=s.nodes[d];return c&&(a[u]={nodeId:d,pos:Q({},c)}),a},{}))}function ec(e,t,n,r){return t?B.values(r.selected,e):n&&r.hover?B.values(r.hover,e):B.values(r.normal,e)}function Do(e){return e.type==="none"?Xl:e}function tc(e,t,n,r,i,s,a,l,u,d){const{makeMarker:c,clearMarker:h}=Ul(i);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}});const f=o.computed(()=>{const m=e.value[t],y=ec(m,n.selected,n.hovered,r);isNaN(+y.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,y.width),y.width=1),(y.color===void 0||y.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",t,y.color),y.color="#000000");let w=B.value(r.normal.width,m);isNaN(+w)&&(w=1);const v=Do(B.values(r.marker.source,[m,y])),p=Do(B.values(r.marker.target,[m,y]));return{stroke:y,normalWidth:w,source:v,target:p}});n.line=f;const g=o.toRef(a.edgeLayoutPoints,t),E=o.toRef(a.summarizedEdges,t),x=o.watchEffect(()=>{var L,V,ae,X,de;const m=e.value[t];if(!m)return;const y=l.nodes[m==null?void 0:m.source],w=l.nodes[m==null?void 0:m.target],v=(L=s[m.source])==null?void 0:L.staticShape,p=(V=s[m.target])==null?void 0:V.staticShape;if(!y||!w||!v||!p)return;const b=Bl(g.value,(ae=E.value)!=null?ae:!1,y,w,u.value,r.keepOrder),[S,C]=Zl(y,w,v,p),O=u.value;n.labelPosition=Kt(b,S*O,C*O);let M=0,T=0;const $=f.value;if($.source.type!=="none"){const J=$.source;M=J.margin+J.width,J.units==="strokeWidth"&&(M*=$.normalWidth)}if($.target.type!=="none"){const J=$.target;T=J.margin+J.width,J.units==="strokeWidth"&&(T*=$.normalWidth)}r.margin&&(M+=r.margin,T+=r.margin);const D=!!r.margin||$.source.type!=="none"||$.target.type!=="none";if(m.source===m.target){n.origin=bt(y,w);const J=B.values(r.selfLoop,m),[De,je]=rc(y,v,J,D,M,T,(de=(X=g.value)==null?void 0:X.pointInGroup)!=null?de:0,O);n.position=De,n.loop=je,n.curve=void 0;return}else n.loop=void 0;if(D&&(M+=S,T+=C),r.type==="straight")n.origin=b,n.curve=void 0,M===0&&T===0?n.position=n.origin:n.position=Kt(n.origin,M*O,T*O);else{n.origin=bt(y,w);const J=g.value?g.value.groupWidth/2-g.value.pointInGroup:0,[De,je]=oc(n.origin,b,J,M*O,T*O);n.position=De,n.curve=je}}),k=o.watchEffect(()=>{e.value[t]&&(n.sourceMarkerId=c(f.value.source,!0,n.sourceMarkerId,f.value.stroke.color,d),n.targetMarkerId=c(f.value.target,!1,n.targetMarkerId,f.value.stroke.color,d))});n.stopWatchHandle=()=>{x(),k(),h(n.sourceMarkerId),h(n.targetMarkerId)}}function nc(e,t){return Object.entries(e).map(([n,r])=>{var i;return r.summarize?{id:(i=Object.keys(r.edges)[0])!=null?i:n,summarized:!0,key:n,group:r,zIndex:Object.keys(r.edges).map(s=>{var a,l;return(l=(a=t[s])==null?void 0:a.zIndex)!=null?l:0}).reduce((s,a)=>Math.max(s,a))}:Object.entries(r.edges).map(([s,a])=>{var l,u;return{id:s,summarized:!1,key:s,edge:a,zIndex:(u=(l=t[s])==null?void 0:l.zIndex)!=null?u:0}})}).flat()}function oc(e,t,n,r,i){const s=W.fromLinePosition(e),a=W.fromLinePosition(t),l=Ll(t),[u,d]=Rl(s.source,s.target,l);let c,h;if(n===0)return r===0&&i===0?c=e:c=Kt(e,r,i),[c,h];const f=W.fromVectors(u,l),g=Le(W.fromVectors(u,s.source),f);if(r===0&&i===0)c=e;else{let m=r/d,y=i/d;g>0&&(m*=-1,y*=-1),c=bt(ye(s.source,u,m),ye(s.target,u,-y));let w=Le(W.fromVectors(u,s.source),W.fromVectors(u,s.target)),v=Le(W.fromPositions(u,c.p1),W.fromPositions(u,c.p2));if(g*w<0&&(w=Qt(w),g*v<0&&(v=Qt(v))),w*v<0){const p=l.clone().add(a.v.normalize().multiplyScalar(.5));return c=bt(l,p),[c,h]}}const[E,x]=Al(c),k=Jt(E,u,x,g).map(m=>m.toObject());return h={center:l,theta:g,circle:{center:u,radius:d},control:k},[c,h]}function rc(e,t,n,r,i,s,a,l){const u=l,d=(n.radius+a/2)*u,c=n.offset*u+d,h=(n.angle-90)*(Math.PI/180),f=N.fromObject({x:e.x+c*Math.cos(h),y:e.y+c*Math.sin(h)}),g=n.isClockwise;let E,x;if(r){const v=Xe(f,d,N.fromObject(e),Ne(t)*u);if(v){[E,x]=v;let p=1;if(g||([E,x]=[x,E],p=-1),i!==0||s!==0){const b=i*u/d*p,S=s*u/d*p;E=ye(E,f,b),x=ye(x,f,-S)}}}if(E===void 0||x===void 0){const v=N.fromObject(e).subtract(f).normalize().multiplyScalar(d);let p=1*(Math.PI/180);g||(p*=-1),E=f.clone().add(mt(v,p)),x=f.clone().add(mt(v,-p))}const k=N.fromObject(E).subtract(f).angleDegree(),w=(N.fromObject(x).subtract(f).angleDegree()+360-k)%360>=180;return[{p1:E,p2:x},{center:f,radius:[d,d],isLargeArc:g?w:!w,isClockwise:g}]}function ic(e,t,n){const r=t.edgeGroups;Object.entries(r).filter(([i,s])=>s.summarize&&!(i in e)).forEach(([i,s])=>{const a={stroke:void 0};a.stroke=o.computed(()=>B.values(n.edge.summarized.stroke,s.edges)),e[i]=a}),Object.keys(e).forEach(i=>{var s;(s=t.edgeGroups[i])!=null&&s.summarize||delete e[i]})}class Ke{static valueOf(t){return Array.from(t.values())}}const sc=3,ac=6,jo=500;function vt(e){return e==="touch"?ac:sc}function nn(e,t,n,r){let i=e.get(t);if(i)i.id!==n&&(i=void 0);else{const l=Array.from(e.entries()).find(([u,d])=>d.id===n);if(l){const[u,d]=l;e.delete(u),i=d}}let s,a;return[i,s,a]=Zo(i,r,n),e.set(t,i),[s,a]}function Zo(e,t,n){const r=Date.now();e&&r-e.lastTime<=jo?(e.count++,e.lastTime=r):e={count:1,lastTime:r,id:n};const i={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let s,a;return t instanceof PointerEvent?(Object.assign(i,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),s=new PointerEvent("click",i),e.count===2&&(a=new PointerEvent("dblclick",i))):(s=new MouseEvent("click",i),e.count===2&&(a=new MouseEvent("dblclick",i))),[e,s,a]}function on(e){const t=Date.now();Array.from(e.entries()).filter(([n,r])=>t-r.lastTime>jo).map(([n,r])=>e.delete(n))}function lc(e,t,n,r,i,s,a){const l={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},u={pointermove:g,pointerup:x,pointercancel:E};function d(v){const p=l.follow.followedPointerId===v.pointerId,b=i.has(v.nodeId),S=!(v.pointerId in l.pointers);if(p&&S||p&&!b){const C=Ke.valueOf(l.pointers).find(O=>i.has(O.nodeId));if(!C){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}v=C,l.follow.followedPointerId=v.pointerId}else{const C=l.pointers.get(l.follow.followedPointerId);if(!C){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}v=C}if(p||b){const C=Ke.valueOf(l.pointers).map(O=>O.nodeId);l.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter(O=>!C.includes(O)).filter(O=>{var M;return(M=e[O])==null?void 0:M.draggable}).map(O=>[O,rn(t.nodes,O)])),v.dragBasePosition=Q({},v.latestPosition),v.nodeBasePosition=rn(t.nodes,v.nodeId)}}o.watch(i,v=>{const p=l.pointers.get(l.follow.followedPointerId);p&&d(p),v.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":v.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),o.watch(n.selectionMode,v=>{v!=="node"&&i.clear()});function c(v,p){const b=v.dragBasePosition.x-p.pageX,S=v.dragBasePosition.y-p.pageY,C=l.follow.followedPointerId==v.pointerId?Q({[v.nodeId]:v.nodeBasePosition},l.follow.nodeBasePositions):{[v.nodeId]:v.nodeBasePosition},O=s.value;return Object.fromEntries(Object.entries(C).map(([M,T])=>[M,{x:T.x-b/O,y:T.y-S/O}]))}function h(v,p){var S,C;if(p.isTrusted||p.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const b=(C=(S=e[v])==null?void 0:S.selectable)!=null?C:!1;if(b){const O=Ke.valueOf(l.pointers).filter(M=>i.has(M.nodeId)).length>0;p.shiftKey||O?i.has(v)?i.delete(v):typeof b=="number"&&i.size>=b||i.add(v):i.has(v)||(i.clear(),i.add(v))}a.emit("node:click",{node:v,event:p})}function f(v,p){p.isTrusted||a.emit("node:dblclick",{node:v,event:p})}function g(v){var C;v.stopPropagation();const p=l.pointers.get(v.pointerId);if(!p)return;p.latestPosition={x:v.pageX,y:v.pageY},p.moveCounter++;const b=vt(v.pointerType);if(p.moveCounter<=b||!((C=e[p.nodeId])!=null&&C.draggable))return;if(p.moveCounter===b+1){const O=c(p,{pointerId:p.pointerId,pageX:p.dragBasePosition.x,pageY:p.dragBasePosition.y});a.emit("node:dragstart",O)}const S=c(p,v);a.emit("node:pointermove",S)}function E(v){v.stopPropagation();let p=l.pointers.get(v.pointerId);if(p){for(p of l.pointers.values()){const b=p.nodeId,S=vt(v.pointerType);if(p.moveCounter>S){const O=c(p,{pointerId:p.pointerId,pageX:p.latestPosition.x,pageY:p.latestPosition.y});a.emit("node:dragend",O)}a.emit("node:pointerup",{node:b,event:v})}l.pointers.clear(),l.follow={followedPointerId:-1,nodeBasePositions:{}},te(u).forEach(([b,S])=>{document.removeEventListener(b,S)}),n.viewMode.value="default"}}function x(v){var O,M,T;v.stopPropagation();const p=l.pointers.get(v.pointerId);if(!p)return;l.pointers.delete(v.pointerId);const b=p.nodeId,S=vt(v.pointerType),C=p.moveCounter>S;if(C){if((O=e[p.nodeId])!=null&&O.draggable){const $=c(p,v);a.emit("node:dragend",$),a.emit("node:pointerup",{node:b,event:v})}}else a.emit("node:pointerup",{node:b,event:v});if(!C){const[$,D]=nn(l.clicks,p.pointerId,b,v);(M=p.eventTarget)==null||M.dispatchEvent($),D&&((T=p.eventTarget)==null||T.dispatchEvent(D))}l.pointers.size===0?(l.follow={followedPointerId:-1,nodeBasePositions:{}},te(u).forEach(([$,D])=>{document.removeEventListener($,D)}),on(l.clicks),n.viewMode.value="default"):d(p),r.clear(),l.hoveredNodesPre.forEach(r.add,r)}function k(v,p){if(p.button==2||(p.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;l.pointers.size==0&&(n.viewMode.value="node",te(u).forEach(([S,C])=>{document.addEventListener(S,C)}));const b={pointerId:p.pointerId,nodeId:v,moveCounter:0,nodeBasePosition:rn(t.nodes,v),dragBasePosition:{x:p.pageX,y:p.pageY},latestPosition:{x:p.pageX,y:p.pageY},eventTarget:p.currentTarget};l.pointers.set(p.pointerId,b),i.has(v)&&(l.follow.followedPointerId<0?(l.follow.followedPointerId=p.pointerId,d(b)):delete l.follow.nodeBasePositions[b.nodeId]),a.emit("node:pointerdown",{node:v,event:p})}function m(v,p){l.hoveredNodesPre.add(v),!(l.pointers.size>0)&&(r.add(v),a.emit("node:pointerover",{node:v,event:p}))}function y(v,p){l.hoveredNodesPre.delete(v),!(l.pointers.size>0)&&(r.delete(v),a.emit("node:pointerout",{node:v,event:p}))}function w(v,p){p.stopPropagation(),a.emit("node:contextmenu",{node:v,event:p})}return{handleNodePointerDownEvent:k,handleNodePointerOverEvent:m,handleNodePointerOutEvent:y,handleNodeClickEvent:h,handleNodeDoubleClickEvent:f,handleNodeContextMenu:w}}function rn(e,t){var r;const n=(r=e[t])!=null?r:{x:0,y:0};return Q({},n)}function cc(e,t,n,r,i){const s={pointers:new Map,pointerPeekCount:0,clicks:new Map},a={pointerup:u,pointercancel:d};o.watch(r,p=>{p.size>0&&t.selectionMode.value!=="edge"?t.selectionMode.value="edge":p.size===0&&t.selectionMode.value==="edge"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,p=>{p!=="edge"&&r.clear()});function l(p,b){if(b.button==2||(b.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",te(a).forEach(([C,O])=>{document.addEventListener(C,O)}),s.pointerPeekCount=0),s.pointerPeekCount++;const S={pointerId:b.pointerId,id:p,eventTarget:b.currentTarget};s.pointers.set(b.pointerId,S),i.emit("edge:pointerdown",se(p,b))}function u(p){var M,T;p.stopPropagation();const b=s.pointers.get(p.pointerId);if(!b)return;s.pointers.delete(p.pointerId);const S=b.id;i.emit("edge:pointerup",se(S,p));const[C,O]=nn(s.clicks,b.pointerId,S instanceof Array?S.join(","):S,p);(M=b.eventTarget)==null||M.dispatchEvent(C),O&&((T=b.eventTarget)==null||T.dispatchEvent(O)),s.pointers.size===0&&(s.pointerPeekCount=0,te(a).forEach(([$,D])=>{document.removeEventListener($,D)}),on(s.clicks),t.viewMode.value="default")}function d(p){if(p.stopPropagation(),!!s.pointers.get(p.pointerId)){for(const S of s.pointers.values()){const C=S.id;i.emit("edge:pointerup",se(C,p))}s.pointers.clear(),s.pointerPeekCount=0,te(a).forEach(([S,C])=>{document.removeEventListener(S,C)}),i.emit("view:mode","default")}}function c(p,b){var O;if(b.isTrusted||b.shiftKey&&!["container","edge"].includes(t.selectionMode.value))return;t.selectionMode.value="edge";const S=p instanceof Array?p:[p],C=Ke.valueOf(s.pointers).filter(M=>(M.id instanceof Array?M.id:[M.id]).every($=>r.has($))).length>0;if(p instanceof Array)S.find(T=>{var $;return($=e[T])==null?void 0:$.selectable})&&(b.shiftKey||C?S.some(T=>r.has(T))?S.forEach(T=>r.delete(T)):S.forEach(T=>{var D;const $=(D=e[T])==null?void 0:D.selectable;typeof $=="number"&&r.size>=$||r.add(T)}):(r.clear(),S.forEach(T=>r.add(T))));else{const M=(O=e[p])==null?void 0:O.selectable;M&&(b.shiftKey||C?r.has(p)?r.delete(p):typeof M=="number"&&r.size>=M||r.add(p):r.has(p)||(r.clear(),r.add(p)))}i.emit("edge:click",se(p,b))}function h(p,b){b.isTrusted||i.emit("edge:dblclick",se(p,b))}function f(p,b){n.add(p),i.emit("edge:pointerover",se(p,b))}function g(p,b){n.delete(p),i.emit("edge:pointerout",se(p,b))}function E(p,b){b.stopPropagation(),i.emit("edge:contextmenu",se(p,b))}function x(p,b){if(b.button==2||(b.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",te(a).forEach(([C,O])=>{document.addEventListener(C,O)}),s.pointerPeekCount=0),s.pointerPeekCount++;const S={pointerId:b.pointerId,id:p,eventTarget:b.currentTarget};s.pointers.set(b.pointerId,S),i.emit("edge:pointerdown",se(p,b))}function k(p,b){p.forEach(S=>n.add(S)),i.emit("edge:pointerover",se(p,b))}function m(p,b){p.forEach(S=>n.delete(S)),i.emit("edge:pointerout",se(p,b))}function y(p,b){c(p,b)}function w(p,b){h(p,b)}function v(p,b){b.stopPropagation(),i.emit("edge:contextmenu",se(p,b))}return{handleEdgePointerDownEvent:l,handleEdgePointerOverEvent:f,handleEdgePointerOutEvent:g,handleEdgeClickEvent:c,handleEdgeDoubleClickEvent:h,handleEdgeContextMenu:E,handleEdgesPointerDownEvent:x,handleEdgesPointerOverEvent:k,handleEdgesPointerOutEvent:m,handleEdgesClickEvent:y,handleEdgesDoubleClickEvent:w,handleEdgesContextMenu:v}}function se(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function uc(e,t,n,r){const i={moveCounter:0,pointerCounter:0,clickState:void 0},s={pointermove:l,pointerup:u,pointercancel:u};function a(g){i.moveCounter=0,i.pointerCounter===0&&te(s).forEach(([E,x])=>{document.addEventListener(E,x,{passive:!0})}),i.pointerCounter++}function l(g){i.moveCounter++}function u(g){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,te(s).forEach(([x,k])=>{document.removeEventListener(x,k)});const E=vt(g.pointerType);if(i.moveCounter<=E){if(g.shiftKey&&t.selectionMode.value!=="container")return;t.selectionMode.value="container";const[x,k,m]=Zo(i.clickState,g,"view");i.clickState=x,e.value.dispatchEvent(k),m&&e.value.dispatchEvent(m)}}}function d(g){g.isTrusted||(g.stopPropagation(),r.emit("view:click",{event:g}))}function c(g){g.isTrusted||(g.stopPropagation(),r.emit("view:dblclick",{event:g}))}function h(g){r.emit("view:contextmenu",{event:g}),i.pointerCounter>0&&(i.pointerCounter=0,te(s).forEach(([E,x])=>{var k;(k=e.value)==null||k.removeEventListener(E,x)}))}const f=g=>{g.preventDefault()};o.onMounted(()=>{const g=e.value;g&&(g.addEventListener("pointerdown",a,{passive:!0}),g.addEventListener("click",d,{passive:!1}),g.addEventListener("dblclick",c,{passive:!1}),g.addEventListener("contextmenu",h,{passive:!1}),n.value&&g.addEventListener("wheel",f,{passive:!1}))}),o.onUnmounted(()=>{const g=e.value;g&&(g.removeEventListener("pointerdown",a),g.removeEventListener("click",d),g.removeEventListener("dblclick",c),g.removeEventListener("contextmenu",h),n.value&&g.removeEventListener("wheel",f))}),o.watch(n,(g,E)=>{const x=e.value;!x||g===E||(g?x.addEventListener("wheel",f,{passive:!1}):x.removeEventListener("wheel",f))})}function dc(e,t,n,r,i,s){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map};function l(m,y){var w,v;return i.value?{path:(v=(w=e[m])==null?void 0:w.path)!=null?v:m,event:y}:{path:m,event:y}}const u={pointerup:c,pointercancel:h};o.watch(r,m=>{m.size>0&&t.selectionMode.value!=="path"?t.selectionMode.value="path":m.size===0&&t.selectionMode.value==="path"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,m=>{m!=="path"&&r.clear()});function d(m,y){var v;if(!((v=e[m])!=null&&v.clickable)||y.button==2||(y.stopPropagation(),!["default","path"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="path",te(u).forEach(([p,b])=>{document.addEventListener(p,b)}),a.pointerPeekCount=0),a.pointerPeekCount++;const w={pointerId:y.pointerId,id:m,eventTarget:y.currentTarget};a.pointers.set(y.pointerId,w),s.emit("path:pointerdown",l(m,y))}function c(m){var b,S;const y=a.pointers.get(m.pointerId);if(!y)return;m.stopPropagation(),a.pointers.delete(m.pointerId);const w=y.id;s.emit("path:pointerup",l(w,m));const[v,p]=nn(a.clicks,y.pointerId,w,m);(b=y.eventTarget)==null||b.dispatchEvent(v),p&&((S=y.eventTarget)==null||S.dispatchEvent(p)),a.pointers.size===0&&(a.pointerPeekCount=0,te(u).forEach(([C,O])=>{document.removeEventListener(C,O)}),on(a.clicks),t.viewMode.value="default")}function h(m){if(a.pointers.get(m.pointerId)){m.stopPropagation();for(const w of a.pointers.values()){const v=w.id;s.emit("path:pointerup",l(v,m))}a.pointers.clear(),a.pointerPeekCount=0,te(u).forEach(([w,v])=>{document.removeEventListener(w,v)}),s.emit("view:mode","default")}}function f(m,y){var w;(w=e[m])!=null&&w.hoverable&&(n.add(m),s.emit("path:pointerover",l(m,y)))}function g(m,y){var w;(w=e[m])!=null&&w.hoverable&&(n.delete(m),s.emit("path:pointerout",l(m,y)))}function E(m,y){var v,p,b;if(y.isTrusted||!((v=e[m])!=null&&v.clickable)||y.shiftKey&&!["container","path"].includes(t.selectionMode.value))return;t.selectionMode.value="path";const w=(b=(p=e[m])==null?void 0:p.selectable)!=null?b:!1;if(w){const S=Ke.valueOf(a.pointers).filter(C=>r.has(C.id)).length>0;y.shiftKey||S?r.has(m)?r.delete(m):typeof w=="number"&&r.size>=w||r.add(m):r.has(m)||(r.clear(),r.add(m))}s.emit("path:click",l(m,y))}function x(m,y){var w;y.isTrusted||(w=e[m])!=null&&w.clickable&&s.emit("path:dblclick",l(m,y))}function k(m,y){var w;(w=e[m])!=null&&w.clickable&&(y.stopPropagation(),s.emit("path:contextmenu",l(m,y)))}return{handlePathPointerDownEvent:d,handlePathPointerOverEvent:f,handlePathPointerOutEvent:g,handlePathClickEvent:E,handlePathDoubleClickEvent:x,handlePathContextMenu:k}}function fc(){}function hc(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function pc(e){return e!==e}function gc(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function mc(e,t,n){return t===t?gc(e,t,n):hc(e,pc,n)}function bc(e,t){var n=e==null?0:e.length;return!!n&&mc(e,t,0)>-1}function yc(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var vc=Math.ceil,wc=Math.max;function sn(e,t,n){(n?Fn(e,t,n):t===void 0)?t=1:t=wc(Yn(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,s=0,a=Array(vc(r/t));i<r;)a[s++]=yc(e,i,i+=t);return a}var Ec=function(){return ie.Date.now()};const an=Ec;var kc="Expected a function",xc=Math.max,Pc=Math.min;function Sc(e,t,n){var r,i,s,a,l,u,d=0,c=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(kc);t=ct(t)||0,ue(n)&&(c=!!n.leading,h="maxWait"in n,s=h?xc(ct(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function g(b){var S=r,C=i;return r=i=void 0,d=b,a=e.apply(C,S),a}function E(b){return d=b,l=setTimeout(m,t),c?g(b):a}function x(b){var S=b-u,C=b-d,O=t-S;return h?Pc(O,s-C):O}function k(b){var S=b-u,C=b-d;return u===void 0||S>=t||S<0||h&&C>=s}function m(){var b=an();if(k(b))return y(b);l=setTimeout(m,x(b))}function y(b){return l=void 0,f&&r?g(b):(r=i=void 0,a)}function w(){l!==void 0&&clearTimeout(l),d=0,r=u=i=l=void 0}function v(){return l===void 0?a:y(an())}function p(){var b=an(),S=k(b);if(r=arguments,i=this,u=b,S){if(l===void 0)return E(u);if(h)return clearTimeout(l),l=setTimeout(m,t),g(u)}return l===void 0&&(l=setTimeout(m,t)),a}return p.cancel=w,p.flush=v,p}function Cc(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var Mc=1/0,Tc=Ie&&1/Dt(new Ie([,-0]))[1]==Mc?function(e){return new Ie(e)}:fc;const Oc=Tc;var Bc=200;function $c(e,t,n){var r=-1,i=bc,s=e.length,a=!0,l=[],u=l;if(n)a=!1,i=Cc;else if(s>=Bc){var d=t?null:Oc(e);if(d)return Dt(d);a=!1,i=lo,u=new Ge}else u=t?[]:l;e:for(;++r<s;){var c=e[r],h=t?t(c):c;if(c=n||c!==0?c:0,a&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),l.push(c)}else i(u,h,n)||(u!==l&&u.push(h),l.push(c))}return l}function zc(e){return e&&e.length?$c(e):[]}function _c(e){return _e(this,null,function*(){const n=yield(yield fetch(e)).blob();return new Promise((r,i)=>{try{const s=new FileReader;s.onload=function(){r(this.result)},s.readAsDataURL(n)}catch(s){i(s)}})})}function ln(e,t,n){var s;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform((s=t.getCTM())==null?void 0:s.inverse());return{x:i.x,y:i.y}}function Ic(e,t,n){const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform(t.getCTM());return{x:i.x,y:i.y}}function Ro(e,t,n){var d;const r=e.cloneNode(!0),i=t.getBBox(),s=1/n,a={x:Math.floor((i.x-10)*s),y:Math.floor((i.y-10)*s),width:Math.ceil((i.width+20)*s),height:Math.ceil((i.height+20)*s)};r.setAttribute("width",a.width.toString()),r.setAttribute("height",a.height.toString());const l=r.querySelector(".v-ng-viewport");l.setAttribute("transform",`translate(${-a.x} ${-a.y}), scale(${s})`),l.removeAttribute("style"),r.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),r.removeAttribute("style");const u=document.createNodeIterator(r,NodeFilter.SHOW_COMMENT);for(;u.nextNode();){const c=u.referenceNode;(d=c.parentNode)==null||d.removeChild(c)}return r}function Ac(e){return _e(this,null,function*(){let t=!1,n=e.getAttribute("href");if(n||(t=!0,n=e.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const r=yield _c(n);e.setAttribute(t?"xlink:href":"href",r)}catch(r){console.warn("Image download failed.",n);return}})}function Lc(i,s,a){return _e(this,arguments,function*(e,t,n,r={}){const l=Ro(e,t,n);if(r.embedImages){const d=Array.from(l.querySelectorAll("image")).map(c=>Ac(c));yield Promise.all(d)}return l})}function Nc(e,t,n,r,i,s){const a=o.computed(()=>!!s.node.selectable&&s.view.boxSelectionEnabled),l=o.computed(()=>t.viewMode.value==="box-selection"),u=o.ref(),d=o.ref(),c={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},h=Sc(()=>{Dc(Z(e.value,"container"),Z(u.value,"viewport"),d,n.nodes,r,i,c.selectedNodesAtSelectStarted,c.selectionType)},50,{maxWait:100}),f=new jc(e,E,x,k,g,m);function g(b){if(c.options.stopTrigger!=="click"||c.pointers.size>0)return;const S={x:b.offsetX,y:b.offsetY};c.startPoint&&N.fromObject(c.startPoint).distance(S)>10||p()}function E(b){b.stopPropagation();const S={x:b.offsetX,y:b.offsetY};c.pointers.size===0&&(c.startPoint=S,f.activate(),c.selectedNodesAtSelectStarted.clear(),i.forEach(C=>c.selectedNodesAtSelectStarted.add(C)),c.options.selectionTypeWithShiftKey==="same"?c.selectionType=c.options.selectionType:c.selectionType=b.shiftKey?c.options.selectionTypeWithShiftKey:c.options.selectionType),c.pointers.has(b.pointerId)||c.pointers.add(b.pointerId),c.points.set(b.pointerId,S),y()}function x(b){if(c.pointers.delete(b.pointerId),c.pointers.size===1){const S=Z(e.value).getBoundingClientRect(),C={x:b.x-S.x,y:b.y-S.y};c.startPoint=C}else c.pointers.size===0&&(f.deactivate(),c.options.stopTrigger==="pointerup"&&p(),c.selectedNodesAtSelectStarted.clear());y()}function k(b){const S=Z(e.value).getBoundingClientRect(),C={x:b.x-S.x,y:b.y-S.y};c.points.set(b.pointerId,C),y(),h()}function m(b){b.key==="Escape"&&c.options.stopTrigger!=="manual"&&(b.stopPropagation(),p())}function y(){let b,S;const C=Array.from(c.pointers);if(C.length>=2){const O=C[0],M=C[C.length-1];b=c.points.get(O),S=c.points.get(M)}else if(c.startPoint&&C.length===1){const O=C[0];b=c.startPoint,S=c.points.get(O)}else b=void 0,S=void 0;b&&S?(d.value={pos:{x:Math.min(b.x,S.x),y:Math.min(b.y,S.y)},size:{width:Math.abs(S.x-b.x),height:Math.abs(S.y-b.y)}},d.value.size.width===0&&(d.value.size.width=1),d.value.size.height===0&&(d.value.size.height=1)):d.value&&(d.value=void 0)}const w=new Zc(e,b=>{a.value&&s.view.selection.detector(b)&&(v({stop:"manual",type:"append",withShiftKey:"invert"}),w.activate())},b=>{a.value&&s.view.selection.detector(b)&&(c.pointers.size===0?p():c.options.stopTrigger="pointerup",w.deactivate())});o.watch(a,b=>{b?w.register():w.unregister()}),o.onMounted(()=>{var b;u.value=(b=e.value)==null?void 0:b.querySelector(".v-ng-viewport"),a.value&&w.register()}),o.onUnmounted(()=>{p(),a.value&&w.unregister()});function v(b={}){var S,C,O;c.options={stopTrigger:(S=b.stop)!=null?S:"pointerup",selectionType:(C=b.type)!=null?C:"append",selectionTypeWithShiftKey:(O=b.withShiftKey)!=null?O:"same"},t.viewMode.value!=="box-selection"&&(t.viewMode.value="box-selection",c.pointers.clear(),f.register())}function p(){t.viewMode.value==="box-selection"&&(t.viewMode.value="default",f.unregister())}return{isBoxSelectionMode:l,selectionBox:d,startBoxSelection:v,stopBoxSelection:p}}function Dc(e,t,n,r,i,s,a,l){if(!n.value)return;const u=n.value,d=ln(e,t,u.pos),c=ln(e,t,{x:u.pos.x+u.size.width,y:u.pos.y+u.size.height}),h=new Set(Object.entries(r).filter(([f,g])=>d.x<=g.x&&g.x<=c.x&&d.y<=g.y&&g.y<=c.y).map(([f,g])=>f));if(l==="append")s.forEach(f=>{h.has(f)||s.delete(f)}),h.forEach(f=>{var E,x;const g=(x=(E=i[f])==null?void 0:E.selectable)!=null?x:!1;(g===!0||typeof g=="number"&&s.size<g)&&s.add(f)});else{const f=new Set(a);f.forEach(g=>{h.has(g)&&f.delete(g)}),h.forEach(g=>{var E,x;if(!a.has(g)){const k=(x=(E=i[g])==null?void 0:E.selectable)!=null?x:!1;(k===!0||typeof k=="number"&&f.size<k)&&f.add(g)}}),s.clear(),f.forEach(g=>s.add(g))}}class jc{constructor(t,n,r,i,s,a){this._container=t,this._handlePointerDownEvent=n,this._handlePointerUpEvent=r,this._handlePointerMoveEvent=i,this._handleClickEvent=s,this._handleKeyDownEvent=a,this._ignoreEvent=l=>l.stopPropagation()}register(){const t={capture:!0,passive:!1},n=Z(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,t),n.addEventListener("click",this._handleClickEvent,t),n.addEventListener("pointerenter",this._ignoreEvent,t),n.addEventListener("pointerleave",this._ignoreEvent,t),document.addEventListener("keydown",this._handleKeyDownEvent,t)}activate(){const t={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,t),document.addEventListener("pointerup",this._handlePointerUpEvent,t)}deactivate(){const t={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,t),document.removeEventListener("pointerup",this._handlePointerUpEvent,t)}unregister(){this.deactivate();const t={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,t),n.removeEventListener("click",this._handleClickEvent,t),n.removeEventListener("pointerenter",this._ignoreEvent,t),n.removeEventListener("pointerleave",this._ignoreEvent,t),document.removeEventListener("keydown",this._handleKeyDownEvent,t)}}}class Zc{constructor(t,n,r){this._container=t,this._handleKeyDownEvent=n,this._handleKeyUpEvent=r,this._preventDefault=i=>{i.stopPropagation(),i.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),Z(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const Vo=Symbol("mouseEventHandlers");function Rc(e,t,n,r,i,s,a,l,u,d,c,h,f,g,E,x){const k={selectionMode:o.ref("container"),viewMode:o.ref("default")};a.size>0?k.selectionMode.value="node":l.size>0?k.selectionMode.value="edge":u.size>0&&(k.selectionMode.value="path"),o.watch(k.viewMode,y=>{x.emit("view:mode",y)}),uc(e,k,g,x);const m=Q(Q(Q(Q({selectedNodes:a,hoveredNodes:d,selectedEdges:l,hoveredEdges:c,selectedPaths:u,hoveredPaths:h},lc(r,t,k,d,a,n,x)),cc(i,k,c,l,x)),dc(s,k,h,u,f,x)),Nc(e,k,t,r,a,E));return o.provide(Vo,m),m}function Ye(){return Z(o.inject(Vo),"mouseEventHandlers")}function Vc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const Ho=Symbol("emitter");function Hc(){const e=Vc();return o.provide(Ho,e),e}function Wc(){return Z(o.inject(Ho),"event emitter")}var wt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Et={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof wt!="undefined")return wt;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var r=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-r.left,e.clientY=e.touches[n].pageY-r.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,r=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var r=this,i,s,a,l=null,u=0;n||(n={});var d=function(){u=n.leading===!1?0:r.now(),l=null,a=e.apply(i,s),l||(i=s=null)};return function(){var c=r.now();!u&&n.leading===!1&&(u=c);var h=t-(c-u);return i=this,s=arguments,h<=0||h>t?(clearTimeout(l),l=null,u=c,a=e.apply(i,s),l||(i=s=null)):!l&&n.trailing!==!1&&(l=setTimeout(d,h)),a}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||Wo(33):Wo(t)},calculateDistance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}};function Wo(e){return function(t){window.setTimeout(t,e)}}var Fc=Et,Uc=function(){var e="",t,n,r,i=[],s={passive:!0},a={passive:!1};Fc.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function l(){return r||(r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),r}function u(x,k){var m=function(y){!y&&(y=window.event);var w={originalEvent:y,target:y.target||y.srcElement,type:"wheel",deltaMode:y.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){y.preventDefault?y.preventDefault():y.returnValue=!1}};return l()=="mousewheel"?(w.deltaY=-.025*y.wheelDelta,y.wheelDeltaX&&(w.deltaX=-.025*y.wheelDeltaX)):w.deltaY=y.detail,k(w)};return i.push({element:x,fn:m}),m}function d(x){for(var k=0;k<i.length;k++)if(i[k].element===x)return i[k].fn;return function(){}}function c(x){for(var k=0;k<i.length;k++)if(i[k].element===x)return i.splice(k,1)}function h(x,k,m,y){var w;l()==="wheel"?w=m:w=u(x,m),x[t](e+k,w,y?s:a)}function f(x,k,m,y){var w;l()==="wheel"?w=m:w=d(x),x[n](e+k,w,y?s:a),c(x)}function g(x,k,m){h(x,l(),k,m),l()=="DOMMouseScroll"&&h(x,"MozMousePixelScroll",k,m)}function E(x,k,m){f(x,l(),k,m),l()=="DOMMouseScroll"&&f(x,"MozMousePixelScroll",k,m)}return{on:g,off:E}}(),kt=Et,Fo="unknown";typeof document!="undefined"&&document.documentMode&&(Fo="ie");var cn={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(kt.isElement(t)?n=t:n=e.querySelector(t),!n){var r=Array.prototype.slice.call(e.childNodes||e.children).filter(function(u){return u.nodeName!=="defs"&&u.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var s=e.childNodes||e.children;if(s&&s.length>0)for(var a=s.length;a>0;a--)s[s.length-a].nodeName!=="defs"&&n.appendChild(s[s.length-a]);e.appendChild(n)}var l=[];return n.getAttribute("class")&&(l=n.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),n.setAttribute("class",l.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:kt.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var r=e[n];r.parentNode.insertBefore(r,r)}},wt?wt.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var r=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),Fo==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return kt.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var r=t.createSVGPoint();return kt.touchNormalize(e,t,n),r.x=e.clientX,r.y=e.clientY,r},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var r=e.createSVGPoint();return r.x=t,r.y=n,r}},oe=cn,Gc={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(oe.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(oe.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(r)}var i=document.createElementNS(oe.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomReset:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r);var i=document.createElementNS(oe.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},qc=cn,ve=Et,G=function(e,t){this.init(e,t)};G.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=ve.proxy(this.updateCTM,this),this.requestAnimationFrame=ve.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},G.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(n)?n:1,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},G.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},G.prototype.getViewBox=function(){return ve.extend({},this.viewBox)},G.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t=isFinite(t)?t:1,e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},G.prototype.getOriginalState=function(){return ve.extend({},this.originalState)},G.prototype.getState=function(){return ve.extend({},this.activeState)},G.prototype.getZoom=function(){return this.activeState.zoom},G.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},G.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},G.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},G.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},G.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,s=!1;r===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=s=!0):ve.isObject(r)&&(r.x===!1?(e.e=this.getPan().x,i=!0):ve.isNumber(r.x)&&(e.e=r.x),r.y===!1?(e.f=this.getPan().y,s=!0):ve.isNumber(r.y)&&(e.f=r.y)),i&&s||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},G.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},G.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},G.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},G.prototype.pendingUpdate=!1,G.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},G.prototype.updateCTM=function(){var e=this.getCTM();qc.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Xc=function(e,t){return new G(e,t)},Uo=Uc,un=Gc,ne=Et,Y=cn,Kc=Xc,R=function(e,t){this.init(e,t)},Yc={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},Go={passive:!0},qo={passive:!1};R.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),Y.setupSvgAttributes(this.svg),this.options=ne.extend(ne.extend({},Yc),t),this.state="none";var r=Y.getBoundingClientRectNormalized(e);this.width=r.width,this.height=r.height,this.viewport=Kc(Y.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(s,a)},onZoom:function(s){if(n.viewport&&n.options.onZoom)return n.options.onZoom(s)},beforePan:function(s,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(s,a)},onPan:function(s){if(n.viewport&&n.options.onPan)return n.options.onPan(s)},onUpdatedCTM:function(s){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(s)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&un.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},R.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(s){if(s.pointerType!=="touch"){var a=e.handleMouseDown(s,t);return t=s,a}},touchstart:function(s){var a=e.handleTouchStart(s,t);return t=s,a},pointerup:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchend:function(s){return e.handleTouchEnd(s)},pointermove:function(s){if(s.pointerType!=="touch")return e.handleMouseMove(s)},touchmove:function(s){return e.handleTouchMove(s)},pointerleave:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},pointercancel:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchleave:function(s){return e.handleTouchEnd(s)},touchcancel:function(s){return e.handleTouchEnd(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?qo:Go);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},R.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Uo.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},R.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Uo.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},R.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/r;var i=this.svg.getScreenCTM().inverse(),s=Y.getEventPoint(e,this.svg).matrixTransform(i),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,s)}},R.prototype.zoomAtPoint=function(e,t,n){var r=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*r.zoom?e=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*r.zoom&&(e=this.options.maxZoom*r.zoom/this.getZoom());var i=this.viewport.getCTM(),s=t.matrixTransform(i.inverse()),a=this.svg.createSVGMatrix().translate(s.x,s.y).scale(e).translate(-s.x,-s.y),l=i.multiply(a);l.a!==i.a&&this.viewport.setCTM(l)},R.prototype.zoom=function(e,t){this.zoomAtPoint(e,Y.getSvgCenterPoint(this.svg,this.width,this.height),t)},R.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},R.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),ne.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=Y.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)},R.prototype.getZoom=function(){return this.viewport.getZoom()},R.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},R.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},R.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},R.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},R.prototype.reset=function(){this.resetZoom(),this.resetPan()},R.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=Y.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)},R.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),ne.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&ne.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},R.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},R.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")},R.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=Y.getTouchPoint(e,this.svg,0),r=Y.getTouchPoint(e,this.svg,1);this.firstDistance=ne.calculateDistance(n,r),n.x=(n.x+r.x)/2,n.y=(n.y+r.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},R.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=Y.getTouchPoint(e,this.svg,0),n=Y.getTouchPoint(e,this.svg,1),r=this.svg.createSVGPoint();if(r.x=(t.x+n.x)/2,r.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var i=r.matrixTransform(this.firstEventCTM.inverse()),s=this.firstEventCTM.translate(i.x-this.stateOrigin.x,i.y-this.stateOrigin.y);this.viewport.setCTM(s)}if(this.options.zoomEnabled){var a=ne.calculateDistance(t,n),l=a/this.firstDistance,u=this.svg.getScreenCTM().inverse(),d=r.matrixTransform(u);this.zoomAtPoint(this.firstZoomLevel*l,d,!0)}}},R.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=Y.getTouchPoint(e,this.svg,0),n=Y.getTouchPoint(e,this.svg,1);this.firstDistance=ne.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},R.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},R.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},R.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})},R.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},R.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},R.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},R.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},R.prototype.resize=function(){var e=Y.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},R.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?qo:Go);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),we=we.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},R.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:ne.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:ne.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,un.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,un.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:ne.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:ne.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:ne.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var we=[],Qc=function(e,t){var n=ne.getSvg(e);if(n===null)return null;for(var r=we.length-1;r>=0;r--)if(we[r].svg===n)return we[r].instance.getPublicInstance();return we.push({svg:n,instance:new R(n,t)}),we[we.length-1].instance.getPublicInstance()},Jc=Qc;const eu={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const r={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:r.height-t.y,left:-t.x,right:r.width-t.x},center:{x:r.width/2-t.x,y:r.height/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:r,height:i}=this.getSizes(),s=t/n,a=r/i,l=s<a?n*a:t,u=s>a?t/a:n,d=Math.min(r/l,i/u),c=this.getRealZoom(),h=this.getZoom(),f=c/h;this.zoom(d/f);const g={x:(e.left+t/2)*d,y:(e.top+n/2)*d};this.pan({x:-g.x+l/2*d,y:-g.y+u/2*d})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const r=Math.max(1e-4,t),i=Math.max(r,n),s=Math.max(Math.min(i,e),r),a=this.getRealZoom(),l=this.getZoom(),u=a/l;this.setMinZoom(r/u).setMaxZoom(i/u).zoom(s/u)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function tu(e,t){var r,i;const n=e;return n._isPanEnabled=(r=t.panEnabled)!=null?r:!0,n._isZoomEnabled=(i=t==null?void 0:t.zoomEnabled)!=null?i:!0,n._internalIsPanEnabled=n.isPanEnabled,n._internalEnablePan=n.enablePan,n._internalDisablePan=n.disablePan,n._internalIsZoomEnabled=n.isZoomEnabled,n._internalEnableZoom=n.enableZoom,n._internalDisableZoom=n.disableZoom,Object.assign(e,eu),n}function nu(e,t){var s,a,l,u,d,c;const n=(a=(s=t.customEventsHandler)==null?void 0:s.init)!=null?a:h=>{},r=(u=(l=t.customEventsHandler)==null?void 0:l.destroy)!=null?u:h=>{},i=(c=(d=t.customEventsHandler)==null?void 0:d.haltEventListeners)!=null?c:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:h=>{tu(h.instance,t),n(h)},destroy:h=>r(h),haltEventListeners:i},Jc(e,t)}function ou(e,t){const n=o.ref();let r=0;const i=[],s=[],a=()=>{r=1,i.forEach(c=>c()),i.length=0},l=()=>{r=2,s.forEach(c=>c()),s.length=0};return o.onMounted(()=>{var x,k,m,y,w,v;const c=Z(e.value,"<svg>"),h=(k=(x=t.customEventsHandler)==null?void 0:x.init)!=null?k:p=>{},f=(y=(m=t.customEventsHandler)==null?void 0:m.destroy)!=null?y:p=>{},g=(v=(w=t.customEventsHandler)==null?void 0:w.haltEventListeners)!=null?v:[];t.customEventsHandler={init:p=>{n.value=p.instance,h(p),a()},destroy:p=>{l(),f(p)},haltEventListeners:g};const E=()=>{const p=c.getBoundingClientRect();p.width!==0&&p.height!==0?nu(c,t):setTimeout(E,200)};E()}),o.onUnmounted(()=>{var c;(c=n.value)==null||c.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:c=>{r===0?i.push(c):r===1&&c()},onSvgPanZoomUnmounted:c=>{r===0||r===1?s.push(c):c()}}}const Xo=Symbol("zoomLevel");function ru(e,t){const n=o.computed(()=>t.scalingObjects?1:1/e.value);return o.provide(Xo,{zoomLevel:e,scale:n}),{scale:n}}function re(){return Z(o.inject(Xo),"zoomLevel")}function iu(e){return e instanceof Promise||e&&typeof e.then=="function"}function su(){let e=null;const t=o.ref({enabled:!1,duration:300,timingFunction:"linear"});function n(r,i=300,s="linear"){e&&(clearTimeout(e),e=null),t.value={enabled:!0,duration:i,timingFunction:s},o.nextTick(()=>_e(this,null,function*(){const a=r();iu(a)&&(yield a),e&&clearTimeout(e),e=window==null?void 0:window.setTimeout(()=>{t.value.enabled=!1,e=null},i)}))}return{transitionWhile:n,transitionOption:t}}function au(e){const t=o.ref({}),n=o.ref(!1);let r=1;const i=new Map;return o.watchEffect(()=>{if(e.value instanceof Array){const s=new Set([]);if(t.value=Object.fromEntries(e.value.map(a=>{let l=a.id;return l||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),l=i.get(a),l||(l="path-"+r++,i.set(a,l))),s.add(l),[l,a]})),n.value)for(const[a,l]of Array.from(i.entries()))s.has(l)||i.delete(a)}else t.value=e.value}),{objects:t,isInCompatibilityModeForPath:n}}function lu(e,t,n,r){if(r){const s=o.ref(r(e[t])),a=l=>{$e(l,s.value)||(s.value=l),$e(l,e[t])||n(`update:${t}`,l)};return o.watch(()=>r(s.value),a),o.watch(()=>e[t],l=>a(r(l))),s.value!==e[t]&&n(`update:${t}`,s.value),s}const i=o.ref(e[t]);return o.watch(()=>e[t],s=>{$e(s,i.value)||(i.value=s)}),o.watch(i,s=>{$e(s,e[t])||n(`update:${t}`,s)}),i}function dn(e,t,n,r){const i=o.reactive(new Set);return o.watch(()=>e[t],()=>{const a=e[t].filter(l=>l in n.value);$e(a,Array.from(i))||(i.clear(),a.forEach(i.add,i))},{deep:!0,immediate:!0}),o.watch(i,()=>{const s=Array.from(i);$e(e[t],s)||r(`update:${t}`,s)}),ce(i)}const Ko=Symbol("selection");function cu(e,t,n){o.provide(Ko,{selectedNodes:e,selectedEdges:t,selectedPaths:n})}function uu(){return Z(o.inject(Ko),"Selections")}const Yo=Symbol("layouts");function du(e){o.provide(Yo,e)}function fn(){return Z(o.inject(Yo),"Layouts")}function fu(e,t){for(let n=0;n<e.length-1;n++)t(e[n],e[n+1])}function Qe(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function hu(e,t,n){const r=e.indexOf(t);r<0||e.splice(r+1,0,n)}function pu(e,t){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return o.computed(()=>{const r=zc(e.view.builtInLayerOrder).filter(s=>{const a=n.includes(s);return a||console.warn(`Layer ${s} is not a built-in layer.`),a}).reverse(),i=[...n];return fu(r,(s,a)=>{Qe(i,a),hu(i,s,a)}),"edge-label"in t||"edges-label"in t||Qe(i,"edge-labels"),e.node.focusring.visible||Qe(i,"focusring"),e.node.label.visible===!1&&Qe(i,"node-labels"),e.path.visible||Qe(i,"paths"),i})}const gu=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],mu=o.defineComponent({__name:"VSelectionBox",props:{box:null,config:null},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("rect",{class:"v-ng-selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,gu))}}),Jd="",bu=["points","fill"],yu=o.defineComponent({__name:"VMarkerHeadArrow",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=o.computed(()=>{const r=t.width,i=t.height;return t.isSource?`${r} ${i}, 0 ${i/2}, ${r} 0`:`0 0, ${r} ${i/2}, 0 ${i}`});return(r,i)=>(o.openBlock(),o.createElementBlock("polygon",{points:o.unref(n),fill:e.color},null,8,bu))}}),vu=["points","stroke-width","stroke"],wu=o.defineComponent({__name:"VMarkerHeadAngle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=o.computed(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),r=o.computed(()=>{const i=n.value/2,s=t.width,a=t.height;return t.isSource?`${s-i} ${a-i}, ${i} ${a/2}, ${s-i} ${i}`:`${i} ${i}, ${s-i} ${a/2}, ${i} ${a-i}`});return(i,s)=>(o.openBlock(),o.createElementBlock("polyline",{points:o.unref(r),fill:"none","stroke-width":o.unref(n),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,vu))}}),Eu=["fill","cx","cy","rx","ry"],ku=o.defineComponent({__name:"VMarkerHeadCircle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,Eu))}}),xu=["id","markerWidth","markerHeight","refX","refY","markerUnits"],Pu=o.defineComponent({__name:"VMarkerHead",props:{id:null,marker:null,scale:null},setup(e){const t=e,n={arrow:yu,angle:wu,circle:ku},r=o.computed(()=>t.marker.width*(t.marker.units==="strokeWidth"?1:t.scale)),i=o.computed(()=>t.marker.height*(t.marker.units==="strokeWidth"?1:t.scale)),s=o.computed(()=>{const a=t.marker.margin*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?r.value+a:-a});return(a,l)=>e.marker.type!=="none"&&e.marker.type!=="custom"?(o.openBlock(),o.createElementBlock("marker",{key:0,id:e.id,markerWidth:o.unref(r),markerHeight:o.unref(i),refX:o.unref(s),refY:o.unref(i)/2,orient:"auto",markerUnits:e.marker.units,class:"v-ng-marker"},[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n[e.marker.type]),{width:o.unref(r),height:o.unref(i),refX:o.unref(s),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,xu)):o.createCommentVNode("",!0)}}),Su={class:"v-ng-background-grid","shape-rendering":"crispEdges"},Cu=["d"],Mu=["d"],Tu=["d"],Ou=["d"],Bu=o.defineComponent({__name:"VBackgroundGrid",setup(e){const{container:t,svgPanZoom:n}=xe(),{zoomLevel:r}=re(),i=Wc(),s=Ta(),a=o.ref({x:0,y:0}),l=o.ref({width:500,height:500});o.onMounted(()=>{var E;const f=(E=n.value)==null?void 0:E.getPan();f&&(a.value={x:-f.x,y:-f.y});const g=t.value.getBoundingClientRect();l.value={width:g.width,height:g.height}}),i.on("view:resize",f=>{l.value={width:f.width,height:f.height}}),i.on("view:pan",f=>{a.value={x:-f.x,y:-f.y}}),i.on("view:zoom",()=>{var g;const f=(g=n.value)==null?void 0:g.getPan();f&&(a.value={x:-f.x,y:-f.y})});const u=o.ref([]),d=o.ref([]),c=o.ref([]),h=o.ref([]);return o.watchEffect(()=>{const f=[],g=[],E=[],x=[],k=1/r.value,m=s.grid.interval,y=a.value.x*k,w=a.value.y*k,v=Math.floor(l.value.width/m+1)*m,p=Math.floor(l.value.height/m+1)*m,b=(a.value.x+v)*k,S=(a.value.y+p)*k,C=s.grid.thickIncrements,O=s.grid.line.dasharray,M=s.grid.thick.dasharray;let T={stroke:s.grid.thick.color,"stroke-width":s.grid.thick.width,"stroke-dasharray":M,"stroke-dashoffset":M?y/k:void 0},$={stroke:s.grid.line.color,"stroke-width":s.grid.line.width,"stroke-dasharray":O,"stroke-dashoffset":O?y/k:void 0};const D=(a.value.x+v)*k;for(let L=w;L<=S;L+=m){const V=Math.floor(L/m);C&&V%C===0?f.push([V,V*m,y,D,T]):E.push([V,V*m,y,D,$])}T=Q({},T),T["stroke-dashoffset"]=M?w/k:void 0,$=Q({},$),$["stroke-dashoffset"]=O?w/k:void 0;const F=(a.value.y+p)*k;for(let L=y;L<=b;L+=m){const V=Math.floor(L/m);C&&V%C===0?g.push([V,V*m,w,F,T]):x.push([V,V*m,w,F,$])}d.value=f,u.value=g,h.value=E,c.value=x}),(f,g)=>(o.openBlock(),o.createElementBlock("g",Su,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(h.value,([E,x,k,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nv${E}`,d:`M ${k} ${x} L ${m} ${x}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Cu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.value,([E,x,k,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nh${E}`,d:`M ${x} ${k} L ${x} ${m}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Mu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(d.value,([E,x,k,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`tv${E}`,d:`M ${k} ${x} L ${m} ${x}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Tu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(u.value,([E,x,k,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`th${E}`,d:`M ${x} ${k} L ${x} ${m}`},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Ou))),128))]))}}),ef="",$u=o.defineComponent({__name:"VBackgroundViewport",setup(e){const{viewport:t}=xe(),n=o.ref(),r=(s,a,l)=>{s.forEach(u=>{var d;return a.setAttribute(u,(d=l.getAttribute(u))!=null?d:"")})},i=new MutationObserver(s=>{if(!n.value)return;const a=s.map(l=>{var u;return(u=l.attributeName)!=null?u:""}).filter(Boolean);r(a,n.value,t.value)});return o.onMounted(()=>{const s=["transform","style"];i.observe(t.value,{attributes:!0,attributeFilter:s}),n.value&&r(s,n.value,t.value)}),o.onUnmounted(()=>{i.disconnect()}),(s,a)=>(o.openBlock(),o.createElementBlock("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[o.renderSlot(s.$slots,"default")],512))}}),zu=["d","stroke-width"],_u=o.defineComponent({__name:"VEdgeBackground",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=Ue(),{handleEdgePointerDownEvent:i,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:a,handleEdgeClickEvent:l,handleEdgeDoubleClickEvent:u,handleEdgeContextMenu:d}=Ye(),c=o.computed(()=>{const f=t.state.position;if(t.state.loop){const{radius:g,isLargeArc:E,isClockwise:x}=t.state.loop,[k,m]=g,y=E?1:0,w=x?1:0;return`M ${f.p1.x} ${f.p1.y} A ${k} ${m} 0 ${y} ${w} ${f.p2.x} ${f.p2.y}`}else{if(r.type==="straight"||!t.state.curve)return`M ${f.p1.x} ${f.p1.y} L ${f.p2.x} ${f.p2.y}`;{const g=[...t.state.curve.control,{x:f.p2.x,y:f.p2.y}],E=[];return E.push(`M ${f.p1.x} ${f.p1.y}`),sn(g,2).forEach(([x,k])=>E.push(`Q ${x.x} ${x.y} ${k.x} ${k.y}`)),E.join(" ")}}}),h=o.computed(()=>(t.state.line.stroke.width+10)*n.value);return(f,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line-background":!0,selectable:e.state.selectable}),d:o.unref(c),stroke:"transparent","stroke-width":o.unref(h),fill:"none",onPointerdown:g[0]||(g[0]=o.withModifiers(E=>o.unref(i)(e.id,E),["stop"])),onPointerenterPassive:g[1]||(g[1]=E=>o.unref(s)(e.id,E)),onPointerleavePassive:g[2]||(g[2]=E=>o.unref(a)(e.id,E)),onClick:g[3]||(g[3]=o.withModifiers(E=>o.unref(l)(e.id,E),["stop"])),onDblclick:g[4]||(g[4]=o.withModifiers(E=>o.unref(u)(e.id,E),["stop"])),onContextmenu:g[5]||(g[5]=E=>o.unref(d)(e.id,E))},null,42,zu))}}),tf="",Iu=o.defineComponent({__name:"VEdgeBackgrounds",setup(e){const{edgeStates:t,edgeGroupStates:n,layouts:r}=le();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n).edgeGroups,({summarize:a,edges:l})=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[a?o.createCommentVNode("",!0):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(l,(u,d)=>(o.openBlock(),o.createBlock(_u,{key:d,id:d,state:o.unref(t)[d],"source-pos":o.unref(r).nodes[u.source],"target-pos":o.unref(r).nodes[u.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),Au=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Qo=o.defineComponent({__name:"VLine",props:{p1:null,p2:null,config:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>Fe(t.config.dasharray,n.value)),s=o.computed(()=>{const a=t.config.animate?dt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return a?`--animation-speed:${a}`:void 0});return(a,l)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`,stroke:e.config.color,"stroke-width":o.unref(r),"stroke-dasharray":o.unref(i),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s))},null,14,Au))}}),Lu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Nu=o.defineComponent({__name:"VArc",props:{p1:null,p2:null,radius:null,isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>Fe(t.config.dasharray,n.value)),s=o.computed(()=>{const l=t.config.animate?dt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?`--animation-speed:${l}`:void 0}),a=o.computed(()=>{const{p1:l,p2:u,radius:d,isLargeArc:c,isClockwise:h}=t,[f,g]=d,E=c?1:0,x=h?1:0;return`M ${l.x} ${l.y} A ${f} ${g} 0 ${E} ${x} ${u.x} ${u.y}`});return(l,u)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:o.unref(a),stroke:e.config.color,"stroke-width":o.unref(r),"stroke-dasharray":o.unref(i),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s)),fill:"none"},null,14,Lu))}}),Du=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],ju=o.defineComponent({__name:"VEdgeCurved",props:{state:null,config:null,markerStart:{default:void 0},markerEnd:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var c,h;const l=t.state.position,u=[...(h=(c=t.state.curve)==null?void 0:c.control)!=null?h:[],{x:l.p2.x,y:l.p2.y}],d=[];return d.push(`M ${l.p1.x} ${l.p1.y}`),sn(u,2).forEach(([f,g])=>d.push(`Q ${f.x} ${f.y} ${g.x} ${g.y}`)),d.join(" ")}),i=o.computed(()=>t.config.width*n.value),s=o.computed(()=>Fe(t.config.dasharray,n.value)),a=o.computed(()=>{const l=t.config.animate?dt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?`--animation-speed:${l}`:void 0});return(l,u)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:o.unref(r),fill:"none",stroke:e.config.color,"stroke-width":o.unref(i),"stroke-dasharray":o.unref(s),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(a)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,Du))}}),Zu=o.defineComponent({__name:"VEdge",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=Ue();return(n,r)=>e.state.loop?(o.openBlock(),o.createBlock(Nu,o.mergeProps({key:0},e.state.position,{radius:e.state.loop.radius,"is-large-arc":e.state.loop.isLargeArc,"is-clockwise":e.state.loop.isClockwise,class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):o.unref(t).type=="straight"||!e.state.curve?(o.openBlock(),o.createBlock(Qo,o.mergeProps({key:1,"data-edge-id":e.id},e.state.position,{class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(o.openBlock(),o.createBlock(ju,{key:2,"data-edge-id":e.id,class:o.normalizeClass([{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"]),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),nf="",Ru=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],Vu=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Je=o.defineComponent({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:null},setup(e){const t=e,{scale:n}=re(),r=o.ref(t.baseX),i=o.ref(t.baseY),s=o.ref(0),a=o.ref("#000000"),l=o.ref(void 0),u=o.ref(0),d=o.ref(0),c=o.ref(0),h=o.ref(0);return o.watchEffect(()=>{var g;const f=n.value;s.value=t.config.strokeWidth*f,a.value=(g=t.config.strokeColor)!=null?g:"none",l.value=Fe(t.config.strokeDasharray,f),t.config.type==="circle"?(r.value=t.baseX,i.value=t.baseY,u.value=t.config.radius*f):(d.value=t.config.width*f,c.value=t.config.height*f,h.value=t.config.borderRadius*f,r.value=t.baseX-d.value/2,i.value=t.baseY-c.value/2)}),(f,g)=>e.config.type==="circle"?(o.openBlock(),o.createElementBlock("circle",{key:0,class:"v-ng-shape-circle",cx:r.value,cy:i.value,r:u.value,fill:e.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Ru)):(o.openBlock(),o.createElementBlock("rect",{key:1,class:"v-ng-shape-rect",x:r.value,y:i.value,width:d.value,height:c.value,rx:h.value,ry:h.value,fill:e.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Vu))}}),Hu=["rx","ry","fill","transform"],Wu=["x","y","dominant-baseline","font-family","font-size","fill"],Fu=["x","dy","dominant-baseline"],et=o.defineComponent({__name:"VLabelText",props:{text:null,x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:null},setup(e){const t=e,n=o.useAttrs(),{scale:r}=re(),i=o.computed(()=>{var k,m;return(m=(k=t.text)==null?void 0:k.toString().split(/\r?\n/))!=null?m:""}),s=o.computed(()=>{var k;return(k=n["font-size"])!=null?k:t.config.fontSize*r.value}),a=o.computed(()=>s.value*t.config.lineHeight),l=o.computed(()=>{const k=t.dominantBaseline;return k==="hanging"?0:k==="central"?-(a.value*(i.value.length-1))/2:-a.value*(i.value.length-1)}),u=o.ref(),d=o.ref(""),c=o.reactive({x:0,y:0,width:0,height:0}),h=o.computed(()=>{var v,p;const k=t.config.background;if(!k)return c;let m,y;k.padding instanceof Object?(m=k.padding.vertical,y=k.padding.horizontal):(m=(v=k.padding)!=null?v:0,y=(p=k.padding)!=null?p:0);const w=a.value-s.value;return{x:c.x-y*r.value,y:c.y-m*r.value-w/2,width:c.width+y*2*r.value,height:c.height+m*2*r.value+w}});let f;const g=()=>{t.config.background&&t.config.background.visible?!f&&u.value&&(f=x(u.value,c,d)):(f==null||f.disconnect(),f=void 0)};o.onMounted(()=>g()),o.watch(()=>t.config.background&&t.config.background.visible,(k,m)=>{k!=m&&g()}),o.onUnmounted(()=>{f==null||f.disconnect(),f=void 0});function E(k,m,y){var v;const w=k.getBBox();m.x=w.x,m.y=w.y,m.width=w.width,m.height=w.height,y.value=(v=k.getAttribute("transform"))!=null?v:void 0}function x(k,m,y){const w=new MutationObserver(()=>{E(k,m,y)});return w.observe(k,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),E(k,m,y),w}return(k,m)=>{var y,w,v,p,b,S;return o.openBlock(),o.createElementBlock(o.Fragment,null,[e.config.background&&e.config.background.visible?(o.openBlock(),o.createElementBlock("rect",o.mergeProps({key:0,class:"v-ng-text-background"},o.unref(h),{rx:((w=(y=e.config.background)==null?void 0:y.borderRadius)!=null?w:0)*o.unref(r),ry:((p=(v=e.config.background)==null?void 0:v.borderRadius)!=null?p:0)*o.unref(r),fill:(S=(b=e.config.background)==null?void 0:b.color)!=null?S:"#ffffff",transform:d.value}),null,16,Hu)):o.createCommentVNode("",!0),o.createElementVNode("text",o.mergeProps({ref_key:"element",ref:u,class:"v-ng-text"},k.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":k.$attrs["font-family"]?`${k.$attrs["font-family"]}`:e.config.fontFamily,"font-size":o.unref(s),fill:k.$attrs.fill?`${k.$attrs.fill}`:e.config.color}),[o.unref(i).length<=1?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createTextVNode(o.toDisplayString(e.text),1)],64)):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(i),(C,O)=>(o.openBlock(),o.createElementBlock("tspan",{key:O,x:e.x,dy:O==0?o.unref(l):o.unref(a),"dominant-baseline":e.dominantBaseline},o.toDisplayString(C),9,Fu))),128))],16,Wu)],64)}}}),Uu=o.defineComponent({__name:"VEdgeSummarized",props:{edges:null,layouts:null},setup(e){const t=e,n=Ue(),{handleEdgesPointerDownEvent:r,handleEdgesPointerOverEvent:i,handleEdgesPointerOutEvent:s,handleEdgesClickEvent:a,handleEdgesDoubleClickEvent:l,handleEdgesContextMenu:u}=Ye(),{edgeStates:d}=le(),c=o.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),h=o.ref({x:0,y:0});o.watchEffect(()=>{const w=Object.keys(t.edges).find(v=>v in d);w&&(c.value=d[w].position,h.value={x:(c.value.p1.x+c.value.p2.x)/2,y:(c.value.p1.y+c.value.p2.y)/2})});const f=o.computed(()=>Object.keys(t.edges)),g=o.computed(()=>B.values(n.summarized.label,t.edges)),E=o.computed(()=>B.values(n.summarized.shape,t.edges)),x=o.computed(()=>B.values(n.summarized.stroke,t.edges)),k=o.computed(()=>f.value.some(w=>d[w].hovered)),m=o.computed(()=>f.value.some(w=>d[w].selectable)),y=o.computed(()=>f.value.some(w=>d[w].selected));return(w,v)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-line-summarized":!0,hovered:o.unref(k),selectable:o.unref(m),selected:o.unref(y)}),onPointerdown:v[0]||(v[0]=o.withModifiers(p=>o.unref(r)(o.unref(f),p),["stop"])),onPointerenterPassive:v[1]||(v[1]=p=>o.unref(i)(o.unref(f),p)),onPointerleavePassive:v[2]||(v[2]=p=>o.unref(s)(o.unref(f),p)),onClick:v[3]||(v[3]=o.withModifiers(p=>o.unref(a)(o.unref(f),p),["stop"])),onDblclick:v[4]||(v[4]=o.withModifiers(p=>o.unref(l)(o.unref(f),p),["stop"])),onContextmenu:v[5]||(v[5]=p=>o.unref(u)(o.unref(f),p))},[o.createVNode(Qo,o.mergeProps(c.value,{config:o.unref(x),"data-edge-id":o.unref(f)[0]}),null,16,["config","data-edge-id"]),o.createVNode(Je,{"base-x":h.value.x,"base-y":h.value.y,config:o.unref(E)},null,8,["base-x","base-y","config"]),o.createVNode(et,{text:Object.keys(e.edges).length.toString(),x:h.value.x,y:h.value.y,config:o.unref(g),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),of="",Gu={class:"v-ng-edge-overlay"},Jo=o.defineComponent({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:null,isSummarized:{type:Boolean}},setup(e){const t=e,{svg:n}=xe(),{scale:r}=re(),i=Ue();function s(){return t.isSummarized?B.values(i.summarized.stroke,t.edges):t.state.line.stroke}function a(c){return{source:c.p1,target:c.p2}}function l(c){if(c.curve)return c.curve.center;{const h=c.origin.p1,f=c.origin.p2;return{x:(h.x+f.x)/2,y:(h.y+f.y)/2}}}function u(){var f;if(!n.value)return 0;const c=(f=t.edgeId)!=null?f:Object.keys(t.edges)[0],h=n.value.querySelector(`path[data-edge-id="${c}"]`);return h?h.getTotalLength():0}function d(c){var E;if(!n.value||!isFinite(c))return t.state.position.p1;t.state;const h=(E=t.edgeId)!=null?E:Object.keys(t.edges)[0],f=n.value.querySelector(`path[data-edge-id="${h}"]`);if(!f)return t.state.position.p1;const g=f.getPointAtLength(c);return{x:g.x,y:g.y}}return(c,h)=>(o.openBlock(),o.createElementBlock("g",Gu,[e.isSummarized?o.renderSlot(c.$slots,"default",{key:0,edges:e.edges,isSummarized:e.isSummarized,stroke:s(),position:a(e.state.origin),center:l(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:u(),pointAtLength:d}):o.renderSlot(c.$slots,"default",{key:1,edgeId:e.edgeId,edge:e.edge,edges:{[e.edgeId]:e.edge},isSummarized:e.isSummarized,stroke:s(),position:a(e.state.origin),center:l(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:u(),pointAtLength:d})]))}}),qu=o.defineComponent({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(e){const{edgeStates:t,edgeZOrderedList:n,layouts:r}=le();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[o.unref(Yl)(a)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[(o.openBlock(),o.createBlock(Uu,{key:a.key,edges:a.group.edges,layouts:o.unref(r).nodes},null,8,["edges","layouts"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(Jo,{key:a.key,edges:a.group.edges,state:o.unref(t)[Object.keys(a.group.edges)[0]],"is-summarized":!0},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.normalizeProps(o.guardReactiveProps(l)))]),_:2},1032,["edges","state"])):o.createCommentVNode("",!0)],64)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[(o.openBlock(),o.createBlock(Zu,{id:a.key,key:a.key,state:o.unref(t)[a.key],"source-pos":o.unref(r).nodes[a.edge.source],"target-pos":o.unref(r).nodes[a.edge.target]},null,8,["id","state","source-pos","target-pos"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(Jo,{key:a.key,"edge-id":a.key,edge:a.edge,state:o.unref(t)[a.key],"is-summarized":!1},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.normalizeProps(o.guardReactiveProps(l)))]),_:2},1032,["edge-id","edge","state"])):o.createCommentVNode("",!0)],64))],64))),256))}}),Xu={class:"v-ng-layer-edges"},Ku=o.defineComponent({__name:"VEdgesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"edge-overlay"in t);return(r,i)=>(o.openBlock(),o.createElementBlock("g",Xu,[o.createVNode(Iu),o.createVNode(qu,{"has-edge-overlay-slot":o.unref(n)},o.createSlots({_:2},[o.unref(n)?{name:"default",fn:o.withCtx(s=>[o.renderSlot(r.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(s)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),Yu=o.defineComponent({__name:"VEdgeLabelPlace",props:{edgeId:null,edge:null,config:null,state:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>Ao(t.state.labelPosition,t.state.line.stroke,t.config.margin,t.config.padding,n.value));return(i,s)=>e.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edgeId:e.edgeId,edge:e.edge,config:e.config,area:o.unref(r),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(n)})}}),Qu=o.defineComponent({__name:"VEdgeLabelsPlace",props:{edges:null,config:null,state:null,summarizeState:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var i,s;return Ao(t.state.labelPosition,(s=(i=t.summarizeState)==null?void 0:i.stroke)!=null?s:t.state.line.stroke,t.config.margin,t.config.padding,n.value)});return(i,s)=>e.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edges:e.edges,config:e.config,area:o.unref(r),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(n)})}}),Ju={class:"v-ng-edge-labels"},ed=o.defineComponent({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){const t=Ue(),{edgeStates:n,edgeGroupStates:r,summarizedEdgeStates:i}=le(),s=o.computed(()=>{const l={},u={};return Object.entries(r.edgeGroups).forEach(([d,c])=>{Object.keys(c.edges).length>0&&(c.summarize?u[d]=c:l[d]=c)}),{individual:l,summarized:u}});function a(l){return Object.keys(l.edges)[0]}return(l,u)=>(o.openBlock(),o.createElementBlock("g",Ju,[e.enableEdgeLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(s).individual,(d,c)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:c},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(d.edges,(h,f)=>(o.openBlock(),o.createBlock(Yu,{key:f,"edge-id":f,edge:h,config:o.unref(t).label,state:o.unref(n)[f]},{default:o.withCtx(g=>[o.renderSlot(l.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(g)))]),_:2},1032,["edge-id","edge","config","state"]))),128))],64))),128)):o.createCommentVNode("",!0),e.enableEdgesLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(s).summarized,(d,c)=>(o.openBlock(),o.createBlock(Qu,{key:c,edges:d.edges,config:o.unref(t).label,state:o.unref(n)[a(d)],"summarize-state":o.unref(i)[a(d)]},{default:o.withCtx(h=>[o.renderSlot(l.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(h)))]),_:2},1032,["edges","config","state","summarize-state"]))),128)):o.createCommentVNode("",!0)]))}}),rf="",td=o.defineComponent({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){return(t,n)=>(o.openBlock(),o.createBlock(ed,{"enable-edge-label":e.enableEdgeLabel,"enable-edges-label":e.enableEdgesLabel,class:"v-ng-layer-edge-labels"},o.createSlots({_:2},[e.enableEdgeLabel?{name:"edge-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"0"}:void 0,e.enableEdgesLabel?{name:"edges-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),nd=o.defineComponent({__name:"VNodeFocusRing",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.x)||0}),r=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.y)||0}),i=ht(),s=o.reactive({});return o.watchEffect(()=>{var l,u,d;const a=t.state.shape;if(a.type==="circle"){const c={type:"circle",radius:a.radius+((l=a.strokeWidth)!=null?l:0)/2+i.focusring.padding+i.focusring.width/2,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,c)}else{const c={type:"rect",width:a.width+((u=a.strokeWidth)!=null?u:0)+i.focusring.padding*2+i.focusring.width,height:a.height+((d=a.strokeWidth)!=null?d:0)+i.focusring.padding*2+i.focusring.width,borderRadius:a.borderRadius>0?a.borderRadius+i.focusring.padding:0,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,c)}}),(a,l)=>(o.openBlock(),o.createBlock(Je,{class:"v-ng-node-focusring","base-x":o.unref(n),"base-y":o.unref(r),config:s},null,8,["base-x","base-y","config"]))}}),sf="",od={class:"v-ng-layer-nodes-selections"},rd=o.defineComponent({__name:"VFocusringLayer",setup(e){const{nodeStates:t}=le(),{selectedNodes:n}=uu(),r=fn();return(i,s)=>(o.openBlock(),o.createElementBlock("g",od,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createBlock(nd,{id:a,key:a,state:o.unref(t)[a],pos:o.unref(r).nodes[a]},null,8,["id","state","pos"]))),128))]))}}),id=["transform"],er=o.defineComponent({__name:"VNode",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var h;return((h=t.pos)==null?void 0:h.x)||0}),r=o.computed(()=>{var h;return((h=t.pos)==null?void 0:h.y)||0}),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:u,handleNodeDoubleClickEvent:d,handleNodeContextMenu:c}=Ye();return(h,f)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${o.unref(n)} ${o.unref(r)})`,onPointerdown:f[0]||(f[0]=o.withModifiers(g=>o.unref(s)(e.id,g),["stop"])),onPointerenterPassive:f[1]||(f[1]=g=>o.unref(a)(e.id,g)),onPointerleavePassive:f[2]||(f[2]=g=>o.unref(l)(e.id,g)),onClick:f[3]||(f[3]=o.withModifiers(g=>o.unref(u)(e.id,g),["stop"])),onDblclick:f[4]||(f[4]=o.withModifiers(g=>o.unref(d)(e.id,g),["stop"])),onContextmenu:f[5]||(f[5]=g=>o.unref(c)(e.id,g))},[o.renderSlot(h.$slots,"override-node",{nodeId:e.id,scale:o.unref(i),config:e.state.shape,class:o.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},()=>[o.createVNode(Je,{config:e.state.shape,class:o.normalizeClass({"v-ng-node-default":!0,draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])])],42,id))}}),af="",sd=o.defineComponent({__name:"VNodesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node"in t),{nodeZOrderedList:r}=le(),i=ht(),s=fn();return(a,l)=>o.unref(n)?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),u=>(o.openBlock(),o.createBlock(er,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},{"override-node":o.withCtx(d=>[o.renderSlot(a.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(d)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),u=>(o.openBlock(),o.createBlock(er,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),tr={[z.NORTH]:0,[z.NORTH_EAST]:1,[z.EAST]:2,[z.SOUTH_EAST]:3,[z.SOUTH]:4,[z.SOUTH_WEST]:5,[z.WEST]:6,[z.NORTH_WEST]:7,[z.CENTER]:-1},ad=[(e,t)=>Ee(e,0,t?90:60),(e,t)=>Ee(e,45,t?90:45),(e,t)=>Ee(e,90,t?60:30),(e,t)=>Ee(e,135,t?90:45),(e,t)=>Ee(e,180,t?90:60),(e,t)=>Ee(e,225,t?90:45),(e,t)=>Ee(e,270,t?60:30),(e,t)=>Ee(e,315,t?90:45)];function ld(e,t,n,r,i){if(i===z.CENTER)return z.CENTER;const s=[];Object.entries(n).forEach(([d,c])=>{let h=!1;if(c.nodeId===e){const g=r(d);g&&(h=!0,c=tt(Q({},c),{pos:{x:g.x,y:g.y}}))}const f=(Xt(Ht(c.pos,t))+360+90)%360;s.push([f,h])});const a=cd(i),u=[a,(a+4)%8,(a+2)%8,(a-2+8)%8,(a+1)%8,(a-1+8)%8,(a+3)%8,(a-3+8)%8].find(d=>s.every(c=>!ad[d](...c)));return u===void 0?i:ud(u,i)}function Ee(e,t,n){e%=360;const r=(t-n+360)%360,i=(t+n)%360;return r<=i?r<e&&e<i:r<e||e<i}function cd(e){var t;return(t=tr[e])!=null?t:0}function ud(e,t){var n,r;return(r=(n=Object.entries(tr)[e])==null?void 0:n[0])!=null?r:t}const dd=["transform"],nr=o.defineComponent({__name:"VNodeLabel",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=ht(),{edgeStates:r}=le(),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:u,handleNodeDoubleClickEvent:d,handleNodeContextMenu:c}=Ye(),h=o.computed(()=>{var M;return((M=t.pos)==null?void 0:M.x)||0}),f=o.computed(()=>{var M;return((M=t.pos)==null?void 0:M.y)||0}),g=o.computed(()=>t.state.label.direction===z.CENTER?0:t.state.label.margin*i.value),E=o.ref(0),x=o.ref(0),k=o.ref(0),m=o.ref(0),y=o.computed(()=>{var D;const M=t.state.label.direction,T=t.state.label.directionAutoAdjustment;if(T===!1)return M;const $={x:h.value,y:f.value};return T===!0?ld(t.state.id,$,t.state.oppositeNodes,F=>{var L,V;return(V=(L=r[F])==null?void 0:L.loop)==null?void 0:V.center},M):(D=T({nodeId:t.state.id,pos:$,oppositeNodes:t.state.oppositeNodes}))!=null?D:M}),w=o.computed(()=>{switch(y.value){case z.CENTER:case z.NORTH:case z.SOUTH:return"middle";case z.EAST:case z.NORTH_EAST:case z.SOUTH_EAST:return"start";case z.WEST:case z.NORTH_WEST:case z.SOUTH_WEST:default:return"end"}}),v=o.computed(()=>{switch(y.value){case z.NORTH:case z.NORTH_EAST:case z.NORTH_WEST:return"text-top";case z.SOUTH:case z.SOUTH_EAST:case z.SOUTH_WEST:return"hanging";case z.CENTER:case z.EAST:case z.WEST:default:return"central"}}),p=o.computed(()=>{switch(y.value){case z.CENTER:case z.NORTH:case z.SOUTH:return 0;case z.EAST:return x.value;case z.WEST:return-x.value;case z.NORTH_EAST:case z.SOUTH_EAST:return m.value;case z.NORTH_WEST:case z.SOUTH_WEST:default:return-m.value}}),b=o.computed(()=>{switch(y.value){case z.NORTH:return-E.value;case z.SOUTH:return E.value;case z.CENTER:case z.EAST:case z.WEST:return 0;case z.NORTH_EAST:case z.NORTH_WEST:return-k.value;case z.SOUTH_EAST:case z.SOUTH_WEST:default:return k.value}});o.watchEffect(()=>{const M=i.value,T=t.state.shape;if(T.type=="circle"){const $=T.radius*M,D=$+g.value,F=Math.sqrt(ee(D,2)/2);E.value=$+g.value,x.value=$+g.value,k.value=F,m.value=F}else{const $=T.borderRadius*M,D=T.width*M,F=T.height*M,L=$+g.value,V=Math.sqrt(ee(L,2)/2);E.value=F/2+g.value,x.value=D/2+g.value,k.value=F/2-$+V,m.value=D/2-$+V}});const S=o.computed(()=>M=>n.label.handleNodeEvents?{pointerdown:T=>{T.stopPropagation(),s(M,T)},pointerenter:T=>a(M,T),pointerleave:T=>l(M,T),click:T=>{T.stopPropagation(),u(M,T)},dblclick:T=>{T.stopPropagation(),d(M,T)},contextmenu:T=>{c(M,T)}}:{}),C=o.computed(()=>{const M=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:M&&t.state.hovered,selected:M&&t.state.selected}}),O=o.computed(()=>{const M=n.label.handleNodeEvents;return{draggable:M&&t.state.draggable,selectable:M&&t.state.selectable}});return(M,T)=>(o.openBlock(),o.createElementBlock("g",o.mergeProps({class:o.unref(C),transform:`translate(${o.unref(h)} ${o.unref(f)})`},o.toHandlers(o.unref(S)(e.id),!0)),[o.renderSlot(M.$slots,"override-node-label",{nodeId:e.id,scale:o.unref(i),text:e.state.labelText,x:o.unref(p),y:o.unref(b),config:e.state.label,shape:e.state.shape,textAnchor:o.unref(w),dominantBaseline:o.unref(v),class:o.normalizeClass(o.unref(O))},()=>[o.createVNode(et,{text:e.state.labelText,x:0,y:0,config:e.state.label,"text-anchor":o.unref(w),"dominant-baseline":o.unref(v),class:o.normalizeClass(o.unref(O)),transform:`translate(${o.unref(p)} ${o.unref(b)})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,dd))}}),lf="",fd=o.defineComponent({__name:"VNodeLabelsLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node-label"in t),{nodeZOrderedList:r}=le(),i=ht(),s=fn(),a=o.computed(()=>l(r.value));function l(u){return u.filter(d=>{var c;return d.label.visible&&((c=d.labelText)!=null?c:!1)})}return(u,d)=>o.unref(n)?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(a),c=>(o.openBlock(),o.createBlock(nr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},{"override-node-label":o.withCtx(h=>[o.renderSlot(u.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(h)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(a),c=>(o.openBlock(),o.createBlock(nr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}});function xt(...e){return e.find(t=>!!t)}const hd=Number.EPSILON*100;function pd(e,t,n,r,i,s,a,l){var x,k;const u=e.edges,d=gd(u),c=u.map((m,y)=>bd(m,d[y],r[m.edgeId])),h=[];let f=!1,g=!1;{const m=c[0];let y=Ne(t[m.source].shape)*i;const w=l+(a==="edgeOfNode"?y:0),v=w<=0?m.line.source:or(m,w,n,!0);h.push(v),y=Ne(t[m.target].shape)*i,l>0&&U.distance(m.line.source,m.line.target)<=w+y&&(f=!0)}const E=u.length;for(let m=1;m<E;m++){const y=c[m-1],w=c[m],v=w.source,p=N.fromObject((x=n[v])!=null?x:{x:0,y:0}),b=md(y,w,p),S=Ne(t[v].shape)*i,C=Math.max(S*(2/3),S-4*i),O=hn(y),M=hn(w),T=Pt(y,p,C,O),$=Pt(w,p,C,!M),D=Pt(y,p,S,O),F=Pt(w,p,S,!M);let L;if(b){const V=U.distance(b,p);if(V<C)L=[xt(T,D,y.line.target),b,xt($,F,w.line.source)];else if(V<=S){let ae,X;D&&T?ae=U.distance(b,T)<U.distance(b,D)?T:D:ae=D||y.line.target,F&&$?X=U.distance(b,$)<U.distance(b,F)?$:F:X=F||w.line.source,L=[ae,b,X]}else T&&$?L=[T,p,$]:D&&F?L=[D,p,F]:L=[xt(T,D,y.line.target),p,xt($,F,w.line.source)]}else T&&$?L=[T,p,$]:D&&F?L=[D,p,F]:L=[y.line.target,p,w.line.source];if(y.curve){const V=h[h.length-1];if(V){const ae=V instanceof Array?V[V.length-1]:V;let X;L instanceof Array?X=s?L[0]:L[1]:X=L;const de=Jt(ae,y.curve.circle.center,X,y.curve.theta);L instanceof Array&&s?h.push([...de,...L]):h.push([...de,X])}}else if(y.loop){const[V,ae,X]=ir(p,y,S);h.push(V),h.push(X),L instanceof Array&&s?h.push([ae,L[1],L[2]]):h.push(L[2])}else s||!(L instanceof Array)?h.push(L):w.curve?h.push(L[1]):w.loop?h.push(L[0]):h.push(L[0],L[2])}{const m=c[c.length-1];let y=Ne(t[m.target].shape)*i;const w=l+(a==="edgeOfNode"?y:0),v=w<=0?m.line.target:or(m,w,n,!1);if(y=Ne(t[m.source].shape)*i,m.loop){const p=N.fromObject((k=n[m.target])!=null?k:{x:0,y:0}),[b,S,C]=ir(p,m,y);h.push(b),h.push(C)}else if(m.curve){const p=h[h.length-1],b=p instanceof Array?p[p.length-1]:p,S=Jt(b,m.curve.circle.center,v,m.curve.theta);h.push([...S,v])}else h.push(v);l>0&&U.distance(m.line.source,m.line.target)<=w+y&&(g=!0)}return f&&(h.shift(),h[0]instanceof Array&&h.unshift(h[0][0])),g&&h.pop(),h}function gd(e){const t=e.length;if(t<=1)return[!0];const n=[];let r=null,i=!0;for(let s=0;s<t;s++){const a=e[s].edge.source,l=e[s].edge.target;if(s===0)if(t>2){const u=[a,l].sort(),d=[e[1].edge.source,e[1].edge.target].sort();u[0]===d[0]&&u[1]===d[1]?[e[2].edge.source,e[2].edge.target].includes(e[1].edge.target)?i=l===e[1].edge.source:i=l===e[1].edge.target:i=[e[1].edge.source,e[1].edge.target].includes(l)}else i=[e[1].edge.source,e[1].edge.target].includes(l);else a===l||(i=r===a);n.push(i),r=i?l:a}return n}function or(e,t,n,r){const i=r?e.source:e.target,s=e.curve;if(s){let a=t/s.circle.radius;return s.theta>0&&(a*=-1),r||(a*=-1),N.fromObject(ye(r?e.line.source:e.line.target,s.circle.center,a))}else{let a,l;if(r?(a=e.line.target,l=e.line.source):(a=e.line.source,l=e.line.target),n[i]){const u=yt(a,l,N.fromObject(n[i]),t);return u===null?a:u}else return a}}function md(e,t,n){let r=null;if(e.loop||t.loop)r=null;else if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();r=Xe(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else r=jl(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)r=yt(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const i=rr(e.line),s=rr(t.line);!isFinite(i)&&!isFinite(s)||Math.abs(i-s)<hd?r=null:r=ze(e.line,t.line)}return r}function Pt(e,t,n,r){if(e.loop){const i=Xe(t,n,e.loop.center,e.loop.radius[0]);return i?r?i[0]:i[1]:null}else return e.curve?Xe(t,n,e.curve.circle.center,e.curve.circle.radius,N.fromObject(e.curve.center)):yt(r?e.line.source:e.line.target,r?e.line.target:e.line.source,t,n)}function bd(e,t,n){let r=n.origin,i=e.edge.source,s=e.edge.target,a=n.curve;const l=n.loop;l?r=n.position:t||(r=Dl(r),i=e.edge.target,s=e.edge.source,a&&(a=tt(Q({},a),{theta:-a.theta})));const u=W.fromLinePosition(r);return{edgeId:e.edgeId,source:i,target:s,line:u,direction:t,curve:a,loop:l}}function rr(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}function ir(e,t,n){const{radius:r,center:i}=Z(t.loop,"Loop of edge parameter"),[s,a]=r,l=Xe(e,n,i,r[0]);let[u,d]=l?l.reverse():[t.line.source,t.line.target];const c=hn(t);c||([u,d]=[d,u]);const h=u,f=d,g=N.fromObject(h).subtract(i).angleDegree();let k=(N.fromObject(f).subtract(i).angleDegree()+360-g)%360>=180;return k=c?k:!k,[h,f,`A ${s} ${a} 0 ${k?1:0} ${c?1:0} ${f.x} ${f.y}`]}function hn(e){return e.loop?e.direction?e.loop.isClockwise:!e.loop.isClockwise:!0}const yd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],vd=o.defineComponent({__name:"VPath",props:{path:null},setup(e){const t=e,{nodeStates:n,edgeStates:r,layouts:i}=le(),{scale:s}=re(),a=ao();function l(f){if(f.edges.length===0)return[];const g=B.value(a.margin,f.path)*s.value;return pd(f,n,i.nodes,r,s.value,a.curveInNode,a.end,g)}function u(f){const g=l(f);let E=!0;return g.map(x=>{if(x===null)E=!0;else{if(typeof x=="string")return x;if(x instanceof Array){x=[...x];const k=[];if(x.length%2===1){const m=x[0];x=x.slice(1),k.push(`L ${m.x} ${m.y}`)}return sn(x,2).map(([m,y])=>k.push(`Q ${m.x} ${m.y} ${y.x} ${y.y}`)),k.join(" ")}else{const k=E;return E=!1,`${k?"M ":"L "}${x.x} ${x.y}`}}}).join(" ")}const d=o.computed(()=>{const f=t.path;return f.selected?B.values(a.selected,f.path):f.hovered&&a.hover?B.values(a.hover,f.path):B.values(a.normal,f.path)}),c=o.computed(()=>Fe(d.value.dasharray,s.value)),h=o.computed(()=>{const f=d.value.animate?dt(d.value.dasharray)*d.value.animationSpeed*s.value:!1;return f?`--animation-speed:${f}`:void 0});return(f,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-path":!0,animate:o.unref(d).animate,clickable:e.path.clickable,hoverable:e.path.hoverable}),d:u(e.path),fill:"none",stroke:o.unref(d).color,"stroke-width":o.unref(d).width*o.unref(s),"stroke-dasharray":o.unref(c),"stroke-linecap":o.unref(d).linecap,"stroke-linejoin":o.unref(d).linejoin,style:o.normalizeStyle(o.unref(h))},null,14,yd))}}),cf="",wd=o.defineComponent({__name:"VPaths",setup(e){const{pathZOrderedList:t}=le(),n=ao(),{handlePathPointerDownEvent:r,handlePathPointerOverEvent:i,handlePathPointerOutEvent:s,handlePathClickEvent:a,handlePathDoubleClickEvent:l,handlePathContextMenu:u}=Ye();return(d,c)=>(o.openBlock(),o.createBlock(o.TransitionGroup,{name:o.unref(n).transition,css:!!o.unref(n).transition,tag:"g",class:"v-ng-paths"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(t),h=>(o.openBlock(),o.createBlock(vd,{key:h.id,path:h,onPointerdown:f=>o.unref(r)(h.id,f),onPointerenterPassive:f=>o.unref(i)(h.id,f),onPointerleavePassive:f=>o.unref(s)(h.id,f),onClick:o.withModifiers(f=>o.unref(a)(h.id,f),["stop"]),onDblclick:o.withModifiers(f=>o.unref(l)(h.id,f),["stop"]),onContextmenu:f=>o.unref(u)(h.id,f)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),Ed=o.defineComponent({__name:"VPathsLayer",setup(e){return(t,n)=>(o.openBlock(),o.createBlock(wd))}}),kd={key:0},sr=o.defineComponent({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{expose:t,emit:n}){const r=e,i=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],s=o.useSlots(),a=o.toRef(r,"nodes"),l=o.toRef(r,"edges"),{objects:u,isInCompatibilityModeForPath:d}=au(o.toRef(r,"paths")),c=Hc();Object.entries(r.eventHandlers).forEach(([P,_])=>{c.on(P,_)});const h=Ma(o.toRef(r,"configs")),f=o.computed(()=>{const P=new Set(Object.keys(s));i.forEach(A=>P.delete(A));const _=Object.fromEntries(q.map(A=>[A,[]]));return Object.assign(_,Object.entries(r.layers).reduce((A,[j,K])=>(P.delete(j),K in A?A[K].push(j):A[K]=[j],A),{})),_.root.push(...P),_}),g=o.computed(()=>h.view.grid.visible),E=o.computed(()=>{const P=f.value;return g.value||P.background.length>0||P.grid.length>0}),x=pu(h,s),k=o.ref(),m=o.ref(),y=o.ref(),w=o.ref(0),v=o.computed(()=>w.value!==0),p=lu(r,"zoomLevel",n,P=>(P=Math.max(P,h.view.minZoomLevel),P=Math.min(P,h.view.maxZoomLevel),P)),{svgPanZoom:b,onSvgPanZoomMounted:S,onSvgPanZoomUnmounted:C}=ou(m,{viewportSelector:".v-ng-viewport",minZoom:h.view.minZoomLevel,maxZoom:h.view.maxZoomLevel,dblClickZoomEnabled:hr(h.view),mouseWheelZoomEnabled:mn(h.view),fit:!0,center:!0,zoomEnabled:h.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:P=>{var A,j;if(w.value===2)return;const _=(j=(A=b.value)==null?void 0:A.getRealZoom())!=null?j:1;Math.abs(p.value-_)>=1e-6&&(p.value=_,c.emit("view:zoom",_))},panEnabled:h.view.panEnabled,onPan:P=>{w.value!==2&&c.emit("view:pan",P)}});Ct({container:k,svg:m,viewport:y,svgPanZoom:b});const O={width:0,height:0},M=globalThis.ResizeObserver?new ResizeObserver(()=>{var _,A,j;if((_=b.value)==null||_.resize(),!h.view.autoPanOnResize)return;const P=(A=k.value)==null?void 0:A.getBoundingClientRect();if(P){const K=-(O.width-P.width)/2,St=-(O.height-P.height)/2;(j=b.value)==null||j.panBy({x:K,y:St});const{width:Ze,height:bn}=P;(O.width!==Ze||O.height!==bn)&&(Object.assign(O,{width:Ze,height:bn}),c.emit("view:resize",{x:P.x,y:P.y,width:Ze,height:bn}))}}):void 0;S(()=>{var K,St,Ze;const P=Z(k.value,"svg-pan-zoom container");M==null||M.observe(P),(St=(K=h.view).onSvgPanZoomInitialized)==null||St.call(K,Z(b.value,"svg-pan-zoom instance"));const _=P.getBoundingClientRect(),{width:A,height:j}=_;Object.assign(O,{width:A,height:j}),(Ze=y.value)==null||Ze.addEventListener("touchstart",pr,{passive:!1})}),C(()=>{var P;M==null||M.disconnect(),(P=y.value)==null||P.removeEventListener("touchstart",pr)});const T=P=>{var _;(_=b.value)==null||_.applyAbsoluteZoomLevel(P,h.view.minZoomLevel,h.view.maxZoomLevel)};o.watch(()=>h.view.panEnabled,P=>{var _;(_=b.value)==null||_.setPanEnabled(P)}),o.watch(()=>[h.view.zoomEnabled,hr(h.view),mn(h.view)],()=>{const P=b.value;P&&Gd(P,h.view.zoomEnabled,h.view.doubleClickZoomEnabled,h.view.mouseWheelZoomEnabled)}),o.watch(p,P=>T(P)),o.watch(()=>[h.view.minZoomLevel,h.view.maxZoomLevel],P=>{T(p.value)});const{scale:$}=ru(p,h.view);S(()=>{const P=r.zoomLevel;T(P)});const D=P=>{var _;Object.keys(r.nodes).length>0?((_=b.value)==null||_.updateBBox(),o.nextTick(P)):P()},F=()=>{D(()=>{b.value&&(b.value.fitToContents(),c.emit("view:fit",void 0))})},L=()=>{D(()=>{var P;(P=b.value)==null||P.center()})},V=()=>{var P,_;return(_=(P=b.value)==null?void 0:P.getViewBox())!=null?_:{top:0,bottom:0,left:0,right:0}},ae=P=>{var _;return(_=b.value)==null?void 0:_.setViewBox(P)},X=dn(r,"selectedNodes",a,n);o.watch(X,P=>c.emit("node:select",Array.from(P)));const de=dn(r,"selectedEdges",l,n);o.watch(de,P=>c.emit("edge:select",Array.from(P)));const J=dn(r,"selectedPaths",u,n);o.watch(J,P=>c.emit("path:select",Array.from(P))),cu(X,de,J);const De=ce(new Set),je=ce(new Set),lr=ce(new Set),ke=ce({nodes:{}});du(ke),o.watch(()=>r.layouts,()=>Object.assign(ke,r.layouts),{deep:!0,immediate:!0}),o.watch(ke,()=>n("update:layouts",ke),{deep:!0});const pn=Fl(),gn=o.ref(!1);c.on("node:dragstart",P=>gn.value=!0),c.on("node:dragend",P=>gn.value=!1),c.on("view:mode",P=>{var _,A,j,K;h.view.panEnabled&&(P==="default"?(_=b.value)==null||_.enablePan():(A=b.value)==null||A.disablePan()),h.view.zoomEnabled&&(P==="default"?(j=b.value)==null||j.enableZoom():(K=b.value)==null||K.disableZoom())});const Md=o.computed(()=>h.view.panEnabled||h.view.zoomEnabled||h.node.draggable),{nodeStates:Td,edgeStates:Od,pathStates:Bd}=Kl(tn(a,X,De),tn(l,de,je),tn(u,J,lr),o.readonly(h),ke,pn,$),$d=o.computed(()=>mn(h.view)),{isBoxSelectionMode:zd,selectionBox:cr,startBoxSelection:_d,stopBoxSelection:Id}=Rc(m,o.readonly(ke),o.readonly(p),Td,Od,Bd,X,de,J,De,je,lr,d,$d,h,c),ur=()=>({layouts:ce(ke.nodes),nodePositions:o.toRef(ke,"nodes"),nodes:a,edges:l,configs:o.readonly(h),scale:o.readonly($),emitter:c,svgPanZoom:Z(b.value)});o.watch(()=>h.view.layoutHandler,(P,_)=>{_.deactivate(),P.activate(ur())});const{transitionWhile:Ad,transitionOption:dr}=su(),Ld=o.computed(()=>{const P=dr.value;return P.enabled?{"--transition-duration":P.duration+"ms","--transition-function":P.timingFunction}:{}});S(()=>{D(()=>{const P=Z(b.value,"svg-pan-zoom");h.view.layoutHandler.activate(ur()),o.nextTick(()=>{const _=h.view.autoPanAndZoomOnLoad;if(h.view.fit||_!==!1){const A=Object.keys(r.nodes).length==0,j=P.getPan();if(A||_==="center-zero"){const K=P.getSizes();P.pan({x:K.width/2,y:K.height/2})}else _==="fit-content"||h.view.fit?F():_==="center-content"&&L();o.nextTick(()=>{const K=P.getPan();j.x===K.x&&j.y===K.y&&c.emit("view:pan",K)})}c.emit("view:load"),w.value=1})})}),C(()=>{w.value=2,c.emit("view:unload"),h.view.layoutHandler.deactivate()});function Nd(){var P;(P=b.value)==null||P.zoomIn()}function Dd(){var P;(P=b.value)==null||P.zoomOut()}function jd(P){var _;(_=b.value)==null||_.pan(P)}function Zd(P){var _;(_=b.value)==null||_.panBy(P)}function Rd(){return Z(b.value).getPan()}function Vd(){const P=Z(b.value).getSizes();return{width:P.width,height:P.height,viewBox:P.viewBox}}function Hd(P){return ln(Z(m.value,"svg"),Z(y.value,"viewport"),P)}function Wd(P){return Ic(Z(m.value,"svg"),Z(y.value,"viewport"),P)}function Fd(){return Ro(Z(m.value,"svg"),Z(y.value,"viewport"),$.value).outerHTML}function Ud(){return _e(this,arguments,function*(P={}){return(yield fr(P)).outerHTML})}function fr(){return _e(this,arguments,function*(P={}){return Lc(Z(m.value,"svg"),Z(y.value,"viewport"),$.value,P)})}t({fitToContents:F,panToCenter:L,getViewBox:V,setViewBox:ae,transitionWhile:Ad,startBoxSelection:_d,stopBoxSelection:Id,zoomIn:Nd,zoomOut:Dd,panTo:jd,panBy:Zd,getPan:Rd,getSizes:Vd,translateFromDomToSvgCoordinates:Hd,translateFromSvgToDomCoordinates:Wd,getAsSvg:Fd,exportAsSvgText:Ud,exportAsSvgElement:fr});function Gd(P,_,A,j){P.setZoomEnabled(_),_&&A?P.enableDblClickZoom():P.disableDblClickZoom(),_&&j?P.enableMouseWheelZoom():P.disableMouseWheelZoom()}function hr(P){return P.zoomEnabled&&P.doubleClickZoomEnabled}function mn(P){return P.zoomEnabled&&P.mouseWheelZoomEnabled}function pr(P){P.stopPropagation()}return(P,_)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"container",ref:k,class:"v-network-graph v-ng-container"},[(o.openBlock(),o.createElementBlock("svg",{ref_key:"svg",ref:m,class:o.normalizeClass(["v-ng-canvas",{show:o.unref(v),dragging:gn.value,touches:o.unref(Md),"box-selection-mode":o.unref(zd)}]),width:"100%",height:"100%"},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(f).root,A=>o.renderSlot(P.$slots,A,{key:A,scale:o.unref($)})),128)),Object.keys(o.unref(pn).markers).length>0?(o.openBlock(),o.createElementBlock("defs",kd,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(pn).markers,(A,j)=>(o.openBlock(),o.createBlock(Pu,{id:j,key:j,marker:A,scale:o.unref($)},null,8,["id","marker","scale"]))),128))])):o.createCommentVNode("",!0),o.unref(E)?(o.openBlock(),o.createBlock($u,{key:1},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(f).background,A=>(o.openBlock(),o.createElementBlock("g",{key:A,class:"v-ng-layer"},[o.renderSlot(P.$slots,A,{scale:o.unref($)})]))),128)),o.unref(g)?(o.openBlock(),o.createBlock(Bu,{key:0})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(f).grid,A=>(o.openBlock(),o.createElementBlock("g",{key:A,class:"v-ng-layer"},[o.renderSlot(P.$slots,A,{scale:o.unref($)})]))),128))]),_:3})):o.createCommentVNode("",!0),o.createElementVNode("g",{ref_key:"viewport",ref:y,class:o.normalizeClass(["v-ng-viewport",{"v-ng-transition":o.unref(dr).enabled}]),style:o.normalizeStyle(o.unref(Ld))},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(f).base,A=>(o.openBlock(),o.createElementBlock("g",{key:A,class:"v-ng-layer"},[o.renderSlot(P.$slots,A,{scale:o.unref($)})]))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(x),A=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:A},[A==="edges"?(o.openBlock(),o.createBlock(Ku,{key:0},{"edge-overlay":o.withCtx(j=>[o.renderSlot(P.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(j)))]),_:3})):A==="edge-labels"?(o.openBlock(),o.createBlock(td,{key:1,"enable-edge-label":"edge-label"in o.unref(s),"enable-edges-label":"edges-label"in o.unref(s)},{"edge-label":o.withCtx(j=>[o.renderSlot(P.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(j)))]),"edges-label":o.withCtx(j=>[o.renderSlot(P.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(j)))]),_:3},8,["enable-edge-label","enable-edges-label"])):A==="focusring"?(o.openBlock(),o.createBlock(rd,{key:2})):A==="nodes"?(o.openBlock(),o.createBlock(sd,{key:3},{"override-node":o.withCtx(j=>[o.renderSlot(P.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(j)))]),_:3})):A==="node-labels"?(o.openBlock(),o.createBlock(fd,{key:4},{"override-node-label":o.withCtx(j=>[o.renderSlot(P.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(j)))]),_:3})):A==="paths"?(o.openBlock(),o.createBlock(Ed,{key:5})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(f)[A],j=>(o.openBlock(),o.createElementBlock("g",{key:j,class:"v-ng-layer"},[o.renderSlot(P.$slots,j,{scale:o.unref($)})]))),128))],64))),128))],6),o.unref(cr)?(o.openBlock(),o.createBlock(mu,{key:2,box:o.unref(cr),config:o.unref(h).view.selection.box},null,8,["box","config"])):o.createCommentVNode("",!0)],2))],512))}}),uf="",ar=o.defineComponent({__name:"VEdgeLabel",props:{area:null,config:null,text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(e){const t=e,n=o.ref(0),r=o.ref(0),i=o.ref("middle"),s=o.ref("central"),a=o.ref(0);o.watchEffect(()=>{const u=t.area.source,d=t.area.target;t.align==="source"?(u.above.x==d.above.x?i.value=u.above.y>d.above.y?"start":"end":i.value=u.above.x<d.above.x?"start":"end",t.verticalAlign==="above"?(n.value=u.above.x,r.value=u.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=u.below.x,r.value=u.below.y,s.value="hanging"):(n.value=(u.above.x+u.below.x)/2,r.value=(u.above.y+u.below.y)/2,s.value="central")):t.align==="target"?(u.above.x==d.above.x?i.value=u.above.y<d.above.y?"start":"end":i.value=u.above.x>d.above.x?"start":"end",t.verticalAlign==="above"?(n.value=d.above.x,r.value=d.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=d.below.x,r.value=d.below.y,s.value="hanging"):(n.value=(d.above.x+d.below.x)/2,r.value=(d.above.y+d.below.y)/2,s.value="central")):(i.value="middle",t.verticalAlign==="above"?(n.value=(u.above.x+d.above.x)/2,r.value=(u.above.y+d.above.y)/2,s.value="text-top"):t.verticalAlign==="below"?(n.value=(u.below.x+d.below.x)/2,r.value=(u.below.y+d.below.y)/2,s.value="hanging"):(n.value=(u.above.x+d.below.x)/2,r.value=(u.above.y+d.below.y)/2,s.value="central"));let c=W.fromPositions(u.above,d.above).v.angleDegree();(c<-90||c>=90)&&(c=c+180,c>180&&(c-=360)),a.value=c});const l=o.computed(()=>s.value==="central"&&!t.config.background?tt(Q({},t.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):t.config);return(u,d)=>(o.openBlock(),o.createBlock(et,{class:"v-ng-edge-label",text:e.text,x:n.value,y:r.value,config:o.unref(l),"text-anchor":i.value,"dominant-baseline":s.value,transform:`rotate(${a.value} ${n.value} ${r.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),xd=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:ar,VLabelText:et,VNetworkGraph:sr,VShape:Je},Symbol.toStringTag,{value:"Module"})),Pd=10;class Sd extends Nt{constructor(t={}){super(),this.options=t}setNodePosition(t,n){const r=this.options.grid||Pd;t.value.x=Math.floor(n.x/r)*r,t.value.y=Math.floor(n.y/r)*r}}const Cd=function(e){Object.entries(xd).forEach(([t,n])=>{e.component(t,n)})};I.Config=B,I.GridLayout=Sd,I.LayerPositions=q,I.NodeLabelDirection=z,I.SimpleLayout=Nt,I.VEdgeLabel=ar,I.VLabelText=et,I.VNetworkGraph=sr,I.VShape=Je,I.Vector2D=N,I.configsWithType=ka,I.default=Cd,I.defineConfigs=xa,I.getFullConfigs=Sa,I.useStates=le,I.withSelf=ut,Object.defineProperties(I,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.js.map
