{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = [\"hidden\"];\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Image name\", -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Category\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Keywords\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Date\", -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Upload Image\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => _ctx.uploadImage && _ctx.uploadImage(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" <input type=\\\"file\\\" ref=\\\"fileInput\\\" @change=\\\"handleFileChange\\\"/>\\r\\n      <img :src=\\\"imagePreview\\\"/> \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    onChange: _cache[0] || (_cache[0] = (...args) => _ctx.previewImage && _ctx.previewImage(...args)),\n    multiple: \"\",\n    hidden: _ctx.isVisible\n  }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_1), _createTextVNode(\" \" + _toDisplayString(_ctx.isVisible) + \" \", 1 /* TEXT */), _createCommentVNode(\" <img v-if=\\\"preview\\\" :src=\\\"preview\\\"/> \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.previewUrls, (url, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [_createElementVNode(\"img\", {\n      src: url,\n      alt: \"Preview Image\"\n    }, null, 8 /* PROPS */, _hoisted_2)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"image_name\",\n    id: \"image_name\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.image_name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.image_name]]), _hoisted_3]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"category\",\n    id: \"category\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.category = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.category]]), _hoisted_4]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    name: \"keywords\",\n    id: \"keywords\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.keywords = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.keywords]]), _hoisted_5]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    name: \"create_date\",\n    id: \"create_date\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.created_date = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.created_date]]), _hoisted_6]), _hoisted_7], 32 /* HYDRATE_EVENTS */)]);\n}","map":{"version":3,"mappings":";;;gCAaIA,oBAAyB,eAAlB,YAAU;gCAIjBA,oBAAuB,eAAhB,UAAQ;gCAIfA,oBAAuB,eAAhB,UAAQ;gCAIfA,oBAAmB,eAAZ,MAAI;gCAETA,oBAA2C;EAAnCC,IAAI,EAAC;AAAQ,GAAC,cAAY;;;uBA1BtCC,oBA4BM,cA3BJF,oBA0BO;IA1BAG,QAAM,wDAAUC,6CAAW;MAChCC,oIAC8B,EAC9BL,oBAA0E;IAAnEC,IAAI,EAAC,MAAM;IAAEK,QAAM,yCAAEF,+CAAY;IAAEG,QAAQ,EAAR,EAAQ;IAAEC,MAAM,EAAIJ;yEAAY,GAC1E,oBAAEA,cAAS,IAAE,GACb,kFAA6C,qBAC7CF,oBAEMO,6BAFsBL,gBAAW,GAA1BM,GAAG,EAAEC,KAAK;yBAAvBT,oBAEM;MAFoCU,GAAG,EAAED;IAAK,IAClDX,oBAAsC;MAAhCa,GAAG,EAAEH,GAAG;MAAEI,GAAG,EAAC;;kCAEtBd,oBAGG,8BAFLA,oBAA+E;IAAxEC,IAAI,EAAE,MAAM;IAACc,IAAI,EAAC,YAAY;IAACC,EAAE,EAAG,YAAY;+DAAUZ,eAAU;iDAAVA,eAAU,KAC3Ea,UAAyB,IAEvBjB,oBAGG,8BAFLA,oBAAyE;IAAlEC,IAAI,EAAE,MAAM;IAACc,IAAI,EAAC,UAAU;IAACC,EAAE,EAAG,UAAU;+DAAUZ,aAAQ;iDAARA,aAAQ,KACrEc,UAAuB,IAErBlB,oBAGG,8BAFLA,oBAAyE;IAAlEC,IAAI,EAAE,MAAM;IAACc,IAAI,EAAC,UAAU;IAACC,EAAE,EAAG,UAAU;+DAAUZ,aAAQ;iDAARA,aAAQ,KACrEe,UAAuB,IAErBnB,oBAGG,8BAFLA,oBAAmF;IAA5EC,IAAI,EAAE,MAAM;IAACc,IAAI,EAAC,aAAa;IAACC,EAAE,EAAG,aAAa;+DAAUZ,iBAAY;iDAAZA,iBAAY,KAC/EgB,UAAmB,IAEjBC,UAA2C","names":["_createElementVNode","type","_createElementBlock","onSubmit","_ctx","_createCommentVNode","onChange","multiple","hidden","_Fragment","url","index","key","src","alt","name","id","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7"],"sourceRoot":"","sources":["C:\\Users\\adars\\Downloads\\Projet_5thsem\\node_se_6\\client\\src\\components\\FileUpload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <form @submit.prevent=\"uploadImage\">\r\n      <!-- <input type=\"file\" ref=\"fileInput\" @change=\"handleFileChange\"/>\r\n      <img :src=\"imagePreview\"/> -->\r\n      <input type=\"file\" @change=\"previewImage\" multiple :hidden = \"isVisible\"/>\r\n      {{isVisible}}\r\n      <!-- <img v-if=\"preview\" :src=\"preview\"/> -->\r\n      <div v-for=\"(url, index) in previewUrls\" :key=\"index\">\r\n        <img :src=\"url\" alt=\"Preview Image\" />\r\n      </div>\r\n      <div>\t\r\n\t\t\t\t<input type =\"text\" name=\"image_name\" id = \"image_name\" v-model=\"image_name\" />\r\n\t\t\t\t<label>Image name</label>\r\n\t\t\t</div>\r\n      <div>\t\r\n\t\t\t\t<input type =\"text\" name=\"category\" id = \"category\" v-model=\"category\" />\r\n\t\t\t\t<label>Category</label>\r\n\t\t\t</div>\r\n      <div>\t\r\n\t\t\t\t<input type =\"text\" name=\"keywords\" id = \"keywords\" v-model=\"keywords\" />\r\n\t\t\t\t<label>Keywords</label>\r\n\t\t\t</div>\r\n      <div>\t\r\n\t\t\t\t<input type =\"date\" name=\"create_date\" id = \"create_date\" v-model=\"created_date\" />\r\n\t\t\t\t<label>Date</label>\r\n\t\t\t</div>\r\n      <button type=\"submit\">Upload Image</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  isVisible = true;\r\n\r\n  data() {\r\n    return {\r\n      file: [],\r\n      previewUrls: [],\r\n      image_name: \"\",\r\n      imageName: \"images\",\r\n      category: \"\",\r\n      keywords: \"\",\r\n      created_date: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    previewImage(event) {\r\n      this.file = event.target.files;\r\n      for (let i = 0; i < this.file.length; i++) {\r\n        const imgfile = this.file[i];\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n        this.previewUrls.push(event.target.result);\r\n        };\r\n        reader.readAsDataURL(imgfile);\r\n      }\r\n    },\r\n    uploadImage(event) {\r\n      const batchSize=10;\r\n      const numItems= this.file.length;\r\n      const numBatches= Math.ceil(numItems/batchSize);\r\n      const files=[];\r\n      for(let i=0;i<this.file.length;i++){\r\n        files.push(this.file[i]);\r\n      }\r\n      for (let i = 0; i < numBatches; i++) {\r\n        const start = i * batchSize;\r\n        const end = Math.min((i + 1) * batchSize, numItems);\r\n        const batch =files.slice(start, end);\r\n        \r\n        let formData = new FormData();\r\n        formData.append('imageName', this.imageName);\r\n        formData.append('image_name',this.image_name);\r\n        formData.append('category', this.category);\r\n        formData.append('keywords', this.keywords);\r\n        formData.append('created_date', this.created_date);\r\n        for(let j=0;j<batchSize;j++){\r\n          formData.append('file', batch[j]);  \r\n        }\r\n        //console.log(formData.image_name);\r\n        axios.post('/api/uploadImage', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        })\r\n        .then(response => {\r\n          console.log(response.data);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        }); \r\n        isVisible=false;\r\n        event.target.form[0].reset();\r\n        \r\n      }\r\n    },\r\n  },\r\n  \r\n};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}